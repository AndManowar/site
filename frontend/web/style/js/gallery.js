/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"gallery": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "js/";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./gallery.js","commons"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../node_modules/lightgallery/dist/js/lightgallery.js":
/*!*****************************************************************************!*\
  !*** /home/ops/work/teya/node_modules/lightgallery/dist/js/lightgallery.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! lightgallery - v1.6.11 - 2018-05-22\n* http://sachinchoolur.github.io/lightGallery/\n* Copyright (c) 2018 Sachin N; Licensed GPLv3 */\n(function (root, factory) {\n  if (true) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"../../node_modules/jquery/dist/jquery.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {\n      return (factory(a0));\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(this, function ($) {\n\n(function() {\n    'use strict';\n\n    var defaults = {\n\n        mode: 'lg-slide',\n\n        // Ex : 'ease'\n        cssEasing: 'ease',\n\n        //'for jquery animation'\n        easing: 'linear',\n        speed: 600,\n        height: '100%',\n        width: '100%',\n        addClass: '',\n        startClass: 'lg-start-zoom',\n        backdropDuration: 150,\n        hideBarsDelay: 6000,\n\n        useLeft: false,\n\n        closable: true,\n        loop: true,\n        escKey: true,\n        keyPress: true,\n        controls: true,\n        slideEndAnimatoin: true,\n        hideControlOnEnd: false,\n        mousewheel: true,\n\n        getCaptionFromTitleOrAlt: true,\n\n        // .lg-item || '.lg-sub-html'\n        appendSubHtmlTo: '.lg-sub-html',\n\n        subHtmlSelectorRelative: false,\n\n        /**\n         * @desc number of preload slides\n         * will exicute only after the current slide is fully loaded.\n         *\n         * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n         * slide will be loaded in the background after the 4th slide is fully loaded..\n         * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n         *\n         */\n        preload: 1,\n        showAfterLoad: true,\n        selector: '',\n        selectWithin: '',\n        nextHtml: '',\n        prevHtml: '',\n\n        // 0, 1\n        index: false,\n\n        iframeMaxWidth: '100%',\n\n        download: true,\n        counter: true,\n        appendCounterTo: '.lg-toolbar',\n\n        swipeThreshold: 50,\n        enableSwipe: true,\n        enableDrag: true,\n\n        dynamic: false,\n        dynamicEl: [],\n        galleryId: 1\n    };\n\n    function Plugin(element, options) {\n\n        // Current lightGallery element\n        this.el = element;\n\n        // Current jquery element\n        this.$el = $(element);\n\n        // lightGallery settings\n        this.s = $.extend({}, defaults, options);\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.s.dynamic && this.s.dynamicEl !== 'undefined' && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) {\n            throw ('When using dynamic mode, you must also define dynamicEl as an Array.');\n        }\n\n        // lightGallery modules\n        this.modules = {};\n\n        // false when lightgallery complete first slide;\n        this.lGalleryOn = false;\n\n        this.lgBusy = false;\n\n        // Timeout function for hiding controls;\n        this.hideBartimeout = false;\n\n        // To determine browser supports for touch events;\n        this.isTouch = ('ontouchstart' in document.documentElement);\n\n        // Disable hideControlOnEnd if sildeEndAnimation is true\n        if (this.s.slideEndAnimatoin) {\n            this.s.hideControlOnEnd = false;\n        }\n\n        // Gallery items\n        if (this.s.dynamic) {\n            this.$items = this.s.dynamicEl;\n        } else {\n            if (this.s.selector === 'this') {\n                this.$items = this.$el;\n            } else if (this.s.selector !== '') {\n                if (this.s.selectWithin) {\n                    this.$items = $(this.s.selectWithin).find(this.s.selector);\n                } else {\n                    this.$items = this.$el.find($(this.s.selector));\n                }\n            } else {\n                this.$items = this.$el.children();\n            }\n        }\n\n        // .lg-item\n        this.$slide = '';\n\n        // .lg-outer\n        this.$outer = '';\n\n        this.init();\n\n        return this;\n    }\n\n    Plugin.prototype.init = function() {\n\n        var _this = this;\n\n        // s.preload should not be more than $item.length\n        if (_this.s.preload > _this.$items.length) {\n            _this.s.preload = _this.$items.length;\n        }\n\n        // if dynamic option is enabled execute immediately\n        var _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n\n            _this.index = parseInt(_hash.split('&slide=')[1], 10);\n\n            $('body').addClass('lg-from-hash');\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                });\n\n                $('body').addClass('lg-on');\n            }\n        }\n\n        if (_this.s.dynamic) {\n\n            _this.$el.trigger('onBeforeOpen.lg');\n\n            _this.index = _this.s.index || 0;\n\n            // prevent accidental double execution\n            if (!$('body').hasClass('lg-on')) {\n                setTimeout(function() {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                });\n            }\n        } else {\n\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\n            _this.$items.on('click.lgcustom', function(event) {\n\n                // For IE8\n                try {\n                    event.preventDefault();\n                    event.preventDefault();\n                } catch (er) {\n                    event.returnValue = false;\n                }\n\n                _this.$el.trigger('onBeforeOpen.lg');\n\n                _this.index = _this.s.index || _this.$items.index(this);\n\n                // prevent accidental double execution\n                if (!$('body').hasClass('lg-on')) {\n                    _this.build(_this.index);\n                    $('body').addClass('lg-on');\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.build = function(index) {\n\n        var _this = this;\n\n        _this.structure();\n\n        // module constructor\n        $.each($.fn.lightGallery.modules, function(key) {\n            _this.modules[key] = new $.fn.lightGallery.modules[key](_this.el);\n        });\n\n        // initiate slide function\n        _this.slide(index, false, false, false);\n\n        if (_this.s.keyPress) {\n            _this.keyPress();\n        }\n\n        if (_this.$items.length > 1) {\n\n            _this.arrow();\n\n            setTimeout(function() {\n                _this.enableDrag();\n                _this.enableSwipe();\n            }, 50);\n\n            if (_this.s.mousewheel) {\n                _this.mousewheel();\n            }\n        } else {\n            _this.$slide.on('click.lg', function() {\n                _this.$el.trigger('onSlideClick.lg');\n            });\n        }\n\n        _this.counter();\n\n        _this.closeGallery();\n\n        _this.$el.trigger('onAfterOpen.lg');\n\n        // Hide controllers if mouse doesn't move for some period\n        _this.$outer.on('mousemove.lg click.lg touchstart.lg', function() {\n\n            _this.$outer.removeClass('lg-hide-items');\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Timeout will be cleared on each slide movement also\n            _this.hideBartimeout = setTimeout(function() {\n                _this.$outer.addClass('lg-hide-items');\n            }, _this.s.hideBarsDelay);\n\n        });\n\n        _this.$outer.trigger('mousemove.lg');\n\n    };\n\n    Plugin.prototype.structure = function() {\n        var list = '';\n        var controls = '';\n        var i = 0;\n        var subHtmlCont = '';\n        var template;\n        var _this = this;\n\n        $('body').append('<div class=\"lg-backdrop\"></div>');\n        $('.lg-backdrop').css('transition-duration', this.s.backdropDuration + 'ms');\n\n        // Create gallery items\n        for (i = 0; i < this.$items.length; i++) {\n            list += '<div class=\"lg-item\"></div>';\n        }\n\n        // Create controlls\n        if (this.s.controls && this.$items.length > 1) {\n            controls = '<div class=\"lg-actions\">' +\n                '<button class=\"lg-prev lg-icon\">' + this.s.prevHtml + '</button>' +\n                '<button class=\"lg-next lg-icon\">' + this.s.nextHtml + '</button>' +\n                '</div>';\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont = '<div class=\"lg-sub-html\"></div>';\n        }\n\n        template = '<div class=\"lg-outer ' + this.s.addClass + ' ' + this.s.startClass + '\">' +\n            '<div class=\"lg\" style=\"width:' + this.s.width + '; height:' + this.s.height + '\">' +\n            '<div class=\"lg-inner\">' + list + '</div>' +\n            '<div class=\"lg-toolbar lg-group\">' +\n            '<span class=\"lg-close lg-icon\"></span>' +\n            '</div>' +\n            controls +\n            subHtmlCont +\n            '</div>' +\n            '</div>';\n\n        $('body').append(template);\n        this.$outer = $('.lg-outer');\n        this.$slide = this.$outer.find('.lg-item');\n\n        if (this.s.useLeft) {\n            this.$outer.addClass('lg-use-left');\n\n            // Set mode lg-slide if use left is true;\n            this.s.mode = 'lg-slide';\n        } else {\n            this.$outer.addClass('lg-use-css3');\n        }\n\n        // For fixed height gallery\n        _this.setTop();\n        $(window).on('resize.lg orientationchange.lg', function() {\n            setTimeout(function() {\n                _this.setTop();\n            }, 100);\n        });\n\n        // add class lg-current to remove initial transition\n        this.$slide.eq(this.index).addClass('lg-current');\n\n        // add Class for css support and transition mode\n        if (this.doCss()) {\n            this.$outer.addClass('lg-css3');\n        } else {\n            this.$outer.addClass('lg-css');\n\n            // Set speed 0 because no animation will happen if browser doesn't support css3\n            this.s.speed = 0;\n        }\n\n        this.$outer.addClass(this.s.mode);\n\n        if (this.s.enableDrag && this.$items.length > 1) {\n            this.$outer.addClass('lg-grab');\n        }\n\n        if (this.s.showAfterLoad) {\n            this.$outer.addClass('lg-show-after-load');\n        }\n\n        if (this.doCss()) {\n            var $inner = this.$outer.find('.lg-inner');\n            $inner.css('transition-timing-function', this.s.cssEasing);\n            $inner.css('transition-duration', this.s.speed + 'ms');\n        }\n\n        setTimeout(function() {\n            $('.lg-backdrop').addClass('in');\n        });\n\n        setTimeout(function() {\n            _this.$outer.addClass('lg-visible');\n        }, this.s.backdropDuration);\n\n        if (this.s.download) {\n            this.$outer.find('.lg-toolbar').append('<a id=\"lg-download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>');\n        }\n\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = $(window).scrollTop();\n\n    };\n\n    // For fixed height gallery\n    Plugin.prototype.setTop = function() {\n        if (this.s.height !== '100%') {\n            var wH = $(window).height();\n            var top = (wH - parseInt(this.s.height, 10)) / 2;\n            var $lGallery = this.$outer.find('.lg');\n            if (wH >= parseInt(this.s.height, 10)) {\n                $lGallery.css('top', top + 'px');\n            } else {\n                $lGallery.css('top', '0px');\n            }\n        }\n    };\n\n    // Find css3 support\n    Plugin.prototype.doCss = function() {\n        // check for css animation support\n        var support = function() {\n            var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n            var root = document.documentElement;\n            var i = 0;\n            for (i = 0; i < transition.length; i++) {\n                if (transition[i] in root.style) {\n                    return true;\n                }\n            }\n        };\n\n        if (support()) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     *  @desc Check the given src is video\n     *  @param {String} src\n     *  @return {Object} video type\n     *  Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     */\n    Plugin.prototype.isVideo = function(src, index) {\n\n        var html;\n        if (this.s.dynamic) {\n            html = this.s.dynamicEl[index].html;\n        } else {\n            html = this.$items.eq(index).attr('data-html');\n        }\n\n        if (!src) {\n            if(html) {\n                return {\n                    html5: true\n                };\n            } else {\n                console.error('lightGallery :- data-src is not pvovided on slide item ' + (index + 1) + '. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html');\n                return false;\n            }\n        }\n\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?vimeo.com\\/([0-9a-z\\-_]+)/i);\n        var dailymotion = src.match(/\\/\\/(?:www\\.)?dai.ly\\/([0-9a-z\\-_]+)/i);\n        var vk = src.match(/\\/\\/(?:www\\.)?(?:vk\\.com|vkontakte\\.ru)\\/(?:video_ext\\.php\\?)(.*)/i);\n\n        if (youtube) {\n            return {\n                youtube: youtube\n            };\n        } else if (vimeo) {\n            return {\n                vimeo: vimeo\n            };\n        } else if (dailymotion) {\n            return {\n                dailymotion: dailymotion\n            };\n        } else if (vk) {\n            return {\n                vk: vk\n            };\n        }\n    };\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    Plugin.prototype.counter = function() {\n        if (this.s.counter) {\n            $(this.s.appendCounterTo).append('<div id=\"lg-counter\"><span id=\"lg-counter-current\">' + (parseInt(this.index, 10) + 1) + '</span> / <span id=\"lg-counter-all\">' + this.$items.length + '</span></div>');\n        }\n    };\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.addHtml = function(index) {\n        var subHtml = null;\n        var subHtmlUrl;\n        var $currentEle;\n        if (this.s.dynamic) {\n            if (this.s.dynamicEl[index].subHtmlUrl) {\n                subHtmlUrl = this.s.dynamicEl[index].subHtmlUrl;\n            } else {\n                subHtml = this.s.dynamicEl[index].subHtml;\n            }\n        } else {\n            $currentEle = this.$items.eq(index);\n            if ($currentEle.attr('data-sub-html-url')) {\n                subHtmlUrl = $currentEle.attr('data-sub-html-url');\n            } else {\n                subHtml = $currentEle.attr('data-sub-html');\n                if (this.s.getCaptionFromTitleOrAlt && !subHtml) {\n                    subHtml = $currentEle.attr('title') || $currentEle.find('img').first().attr('alt');\n                }\n            }\n        }\n\n        if (!subHtmlUrl) {\n            if (typeof subHtml !== 'undefined' && subHtml !== null) {\n\n                // get first letter of subhtml\n                // if first letter starts with . or # get the html form the jQuery object\n                var fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n                        subHtml = $currentEle.find(subHtml).html();\n                    } else {\n                        subHtml = $(subHtml).html();\n                    }\n                }\n            } else {\n                subHtml = '';\n            }\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n            if (subHtmlUrl) {\n                this.$outer.find(this.s.appendSubHtmlTo).load(subHtmlUrl);\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).html(subHtml);\n            }\n\n        } else {\n\n            if (subHtmlUrl) {\n                this.$slide.eq(index).load(subHtmlUrl);\n            } else {\n                this.$slide.eq(index).append(subHtml);\n            }\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.$outer.find(this.s.appendSubHtmlTo).addClass('lg-empty-html');\n            } else {\n                this.$outer.find(this.s.appendSubHtmlTo).removeClass('lg-empty-html');\n            }\n        }\n\n        this.$el.trigger('onAfterAppendSubHtml.lg', [index]);\n    };\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.preload = function(index) {\n        var i = 1;\n        var j = 1;\n        for (i = 1; i <= this.s.preload; i++) {\n            if (i >= this.$items.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false, 0);\n        }\n\n        for (j = 1; j <= this.s.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false, 0);\n        }\n    };\n\n    /**\n     *  @desc Load slide content into slide.\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     *  @param {Boolean} delay - delay for adding complete class. it is 0 except first time.\n     */\n    Plugin.prototype.loadContent = function(index, rec, delay) {\n\n        var _this = this;\n        var _hasPoster = false;\n        var _$img;\n        var _src;\n        var _poster;\n        var _srcset;\n        var _sizes;\n        var _html;\n        var getResponsiveSrc = function(srcItms) {\n            var rsWidth = [];\n            var rsSrc = [];\n            for (var i = 0; i < srcItms.length; i++) {\n                var __src = srcItms[i].split(' ');\n\n                // Manage empty space\n                if (__src[0] === '') {\n                    __src.splice(0, 1);\n                }\n\n                rsSrc.push(__src[0]);\n                rsWidth.push(__src[1]);\n            }\n\n            var wWidth = $(window).width();\n            for (var j = 0; j < rsWidth.length; j++) {\n                if (parseInt(rsWidth[j], 10) > wWidth) {\n                    _src = rsSrc[j];\n                    break;\n                }\n            }\n        };\n\n        if (_this.s.dynamic) {\n\n            if (_this.s.dynamicEl[index].poster) {\n                _hasPoster = true;\n                _poster = _this.s.dynamicEl[index].poster;\n            }\n\n            _html = _this.s.dynamicEl[index].html;\n            _src = _this.s.dynamicEl[index].src;\n\n            if (_this.s.dynamicEl[index].responsive) {\n                var srcDyItms = _this.s.dynamicEl[index].responsive.split(',');\n                getResponsiveSrc(srcDyItms);\n            }\n\n            _srcset = _this.s.dynamicEl[index].srcset;\n            _sizes = _this.s.dynamicEl[index].sizes;\n\n        } else {\n\n            if (_this.$items.eq(index).attr('data-poster')) {\n                _hasPoster = true;\n                _poster = _this.$items.eq(index).attr('data-poster');\n            }\n\n            _html = _this.$items.eq(index).attr('data-html');\n            _src = _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src');\n\n            if (_this.$items.eq(index).attr('data-responsive')) {\n                var srcItms = _this.$items.eq(index).attr('data-responsive').split(',');\n                getResponsiveSrc(srcItms);\n            }\n\n            _srcset = _this.$items.eq(index).attr('data-srcset');\n            _sizes = _this.$items.eq(index).attr('data-sizes');\n\n        }\n\n        //if (_src || _srcset || _sizes || _poster) {\n\n        var iframe = false;\n        if (_this.s.dynamic) {\n            if (_this.s.dynamicEl[index].iframe) {\n                iframe = true;\n            }\n        } else {\n            if (_this.$items.eq(index).attr('data-iframe') === 'true') {\n                iframe = true;\n            }\n        }\n\n        var _isVideo = _this.isVideo(_src, index);\n        if (!_this.$slide.eq(index).hasClass('lg-loaded')) {\n            if (iframe) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont lg-has-iframe\" style=\"max-width:' + _this.s.iframeMaxWidth + '\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\"' + _src + '\"  allowfullscreen=\"true\"></iframe></div></div>');\n            } else if (_hasPoster) {\n                var videoClass = '';\n                if (_isVideo && _isVideo.youtube) {\n                    videoClass = 'lg-has-youtube';\n                } else if (_isVideo && _isVideo.vimeo) {\n                    videoClass = 'lg-has-vimeo';\n                } else {\n                    videoClass = 'lg-has-html5';\n                }\n\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont ' + videoClass + ' \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"' + _poster + '\" /></div></div>');\n\n            } else if (_isVideo) {\n                _this.$slide.eq(index).prepend('<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>');\n                _this.$el.trigger('hasVideo.lg', [index, _src, _html]);\n            } else {\n                _this.$slide.eq(index).prepend('<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" src=\"' + _src + '\" /></div>');\n            }\n\n            _this.$el.trigger('onAferAppendSlide.lg', [index]);\n\n            _$img = _this.$slide.eq(index).find('.lg-object');\n            if (_sizes) {\n                _$img.attr('sizes', _sizes);\n            }\n\n            if (_srcset) {\n                _$img.attr('srcset', _srcset);\n                try {\n                    picturefill({\n                        elements: [_$img[0]]\n                    });\n                } catch (e) {\n                    console.warn('lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.');\n                }\n            }\n\n            if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n                _this.addHtml(index);\n            }\n\n            _this.$slide.eq(index).addClass('lg-loaded');\n        }\n\n        _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n\n            // For first time add some delay for displaying the start animation.\n            var _speed = 0;\n\n            // Do not change the delay value because it is required for zoom plugin.\n            // If gallery opened from direct url (hash) speed value should be 0\n            if (delay && !$('body').hasClass('lg-from-hash')) {\n                _speed = delay;\n            }\n\n            setTimeout(function() {\n                _this.$slide.eq(index).addClass('lg-complete');\n                _this.$el.trigger('onSlideItemLoad.lg', [index, delay || 0]);\n            }, _speed);\n\n        });\n\n        // @todo check load state for html5 videos\n        if (_isVideo && _isVideo.html5 && !_hasPoster) {\n            _this.$slide.eq(index).addClass('lg-complete');\n        }\n\n        if (rec === true) {\n            if (!_this.$slide.eq(index).hasClass('lg-complete')) {\n                _this.$slide.eq(index).find('.lg-object').on('load.lg error.lg', function() {\n                    _this.preload(index);\n                });\n            } else {\n                _this.preload(index);\n            }\n        }\n\n        //}\n    };\n\n    /**\n    *   @desc slide function for lightgallery\n        ** Slide() gets call on start\n        ** ** Set lg.on true once slide() function gets called.\n        ** Call loadContent() on slide() function inside setTimeout\n        ** ** On first slide we do not want any animation like slide of fade\n        ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n        ** ** Else loadContent() should wait for the transition to complete.\n        ** ** So set timeout s.speed + 50\n    <=> ** loadContent() will load slide content in to the particular slide\n        ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n        ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n        ** ** avoid simultaneous image load\n    <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n        ** loadContent()  <====> Preload();\n\n    *   @param {Number} index - index of the slide\n    *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n    *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n    *   @param {String} direction - Direction of the slide(next/prev)\n    */\n    Plugin.prototype.slide = function(index, fromTouch, fromThumb, direction) {\n\n        var _prevIndex = this.$outer.find('.lg-current').index();\n        var _this = this;\n\n        // Prevent if multiple call\n        // Required for hsh plugin\n        if (_this.lGalleryOn && (_prevIndex === index)) {\n            return;\n        }\n\n        var _length = this.$slide.length;\n        var _time = _this.lGalleryOn ? this.s.speed : 0;\n\n        if (!_this.lgBusy) {\n\n            if (this.s.download) {\n                var _src;\n                if (_this.s.dynamic) {\n                    _src = _this.s.dynamicEl[index].downloadUrl !== false && (_this.s.dynamicEl[index].downloadUrl || _this.s.dynamicEl[index].src);\n                } else {\n                    _src = _this.$items.eq(index).attr('data-download-url') !== 'false' && (_this.$items.eq(index).attr('data-download-url') || _this.$items.eq(index).attr('href') || _this.$items.eq(index).attr('data-src'));\n\n                }\n\n                if (_src) {\n                    $('#lg-download').attr('href', _src);\n                    _this.$outer.removeClass('lg-hide-download');\n                } else {\n                    _this.$outer.addClass('lg-hide-download');\n                }\n            }\n\n            this.$el.trigger('onBeforeSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n\n            _this.lgBusy = true;\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Add title if this.s.appendSubHtmlTo === lg-sub-html\n            if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n                // wait for slide animation to complete\n                setTimeout(function() {\n                    _this.addHtml(index);\n                }, _time);\n            }\n\n            this.arrowDisable(index);\n\n            if (!direction) {\n                if (index < _prevIndex) {\n                    direction = 'prev';\n                } else if (index > _prevIndex) {\n                    direction = 'next';\n                }\n            }\n\n            if (!fromTouch) {\n\n                // remove all transitions\n                _this.$outer.addClass('lg-no-trans');\n\n                this.$slide.removeClass('lg-prev-slide lg-next-slide');\n\n                if (direction === 'prev') {\n\n                    //prevslide\n                    this.$slide.eq(index).addClass('lg-prev-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-next-slide');\n                } else {\n\n                    // next slide\n                    this.$slide.eq(index).addClass('lg-next-slide');\n                    this.$slide.eq(_prevIndex).addClass('lg-prev-slide');\n                }\n\n                // give 50 ms for browser to add/remove class\n                setTimeout(function() {\n                    _this.$slide.removeClass('lg-current');\n\n                    //_this.$slide.eq(_prevIndex).removeClass('lg-current');\n                    _this.$slide.eq(index).addClass('lg-current');\n\n                    // reset all transitions\n                    _this.$outer.removeClass('lg-no-trans');\n                }, 50);\n            } else {\n\n                this.$slide.removeClass('lg-prev-slide lg-current lg-next-slide');\n                var touchPrev;\n                var touchNext;\n                if (_length > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n\n                    if ((index === 0) && (_prevIndex === _length - 1)) {\n\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    } else if ((index === _length - 1) && (_prevIndex === 0)) {\n\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = _length - 1;\n                    }\n\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n\n                if (direction === 'prev') {\n                    _this.$slide.eq(touchNext).addClass('lg-next-slide');\n                } else {\n                    _this.$slide.eq(touchPrev).addClass('lg-prev-slide');\n                }\n\n                _this.$slide.eq(index).addClass('lg-current');\n            }\n\n            if (_this.lGalleryOn) {\n                setTimeout(function() {\n                    _this.loadContent(index, true, 0);\n                }, this.s.speed + 50);\n\n                setTimeout(function() {\n                    _this.lgBusy = false;\n                    _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n                }, this.s.speed);\n\n            } else {\n                _this.loadContent(index, true, _this.s.backdropDuration);\n\n                _this.lgBusy = false;\n                _this.$el.trigger('onAfterSlide.lg', [_prevIndex, index, fromTouch, fromThumb]);\n            }\n\n            _this.lGalleryOn = true;\n\n            if (this.s.counter) {\n                $('#lg-counter-current').text(index + 1);\n            }\n\n        }\n        _this.index = index;\n\n    };\n\n    /**\n     *  @desc Go to next slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToNextSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if ((_this.index + 1) < _this.$slide.length) {\n                _this.index++;\n                _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                _this.slide(_this.index, fromTouch, false, 'next');\n            } else {\n                if (_loop) {\n                    _this.index = 0;\n                    _this.$el.trigger('onBeforeNextSlide.lg', [_this.index]);\n                    _this.slide(_this.index, fromTouch, false, 'next');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-right-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    /**\n     *  @desc Go to previous slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToPrevSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = _this.s.loop;\n        if (fromTouch && _this.$slide.length < 3) {\n            _loop = false;\n        }\n\n        if (!_this.lgBusy) {\n            if (_this.index > 0) {\n                _this.index--;\n                _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                _this.slide(_this.index, fromTouch, false, 'prev');\n            } else {\n                if (_loop) {\n                    _this.index = _this.$items.length - 1;\n                    _this.$el.trigger('onBeforePrevSlide.lg', [_this.index, fromTouch]);\n                    _this.slide(_this.index, fromTouch, false, 'prev');\n                } else if (_this.s.slideEndAnimatoin && !fromTouch) {\n                    _this.$outer.addClass('lg-left-end');\n                    setTimeout(function() {\n                        _this.$outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    Plugin.prototype.keyPress = function() {\n        var _this = this;\n        if (this.$items.length > 1) {\n            $(window).on('keyup.lg', function(e) {\n                if (_this.$items.length > 1) {\n                    if (e.keyCode === 37) {\n                        e.preventDefault();\n                        _this.goToPrevSlide();\n                    }\n\n                    if (e.keyCode === 39) {\n                        e.preventDefault();\n                        _this.goToNextSlide();\n                    }\n                }\n            });\n        }\n\n        $(window).on('keydown.lg', function(e) {\n            if (_this.s.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (!_this.$outer.hasClass('lg-thumb-open')) {\n                    _this.destroy();\n                } else {\n                    _this.$outer.removeClass('lg-thumb-open');\n                }\n            }\n        });\n    };\n\n    Plugin.prototype.arrow = function() {\n        var _this = this;\n        this.$outer.find('.lg-prev').on('click.lg', function() {\n            _this.goToPrevSlide();\n        });\n\n        this.$outer.find('.lg-next').on('click.lg', function() {\n            _this.goToNextSlide();\n        });\n    };\n\n    Plugin.prototype.arrowDisable = function(index) {\n\n        // Disable arrows if s.hideControlOnEnd is true\n        if (!this.s.loop && this.s.hideControlOnEnd) {\n            if ((index + 1) < this.$slide.length) {\n                this.$outer.find('.lg-next').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-next').attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            if (index > 0) {\n                this.$outer.find('.lg-prev').removeAttr('disabled').removeClass('disabled');\n            } else {\n                this.$outer.find('.lg-prev').attr('disabled', 'disabled').addClass('disabled');\n            }\n        }\n    };\n\n    Plugin.prototype.setTranslate = function($el, xValue, yValue) {\n        // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n        if (this.s.useLeft) {\n            $el.css('left', xValue);\n        } else {\n            $el.css({\n                transform: 'translate3d(' + (xValue) + 'px, ' + yValue + 'px, 0px)'\n            });\n        }\n    };\n\n    Plugin.prototype.touchMove = function(startCoords, endCoords) {\n\n        var distance = endCoords - startCoords;\n\n        if (Math.abs(distance) > 15) {\n            // reset opacity and transition duration\n            this.$outer.addClass('lg-dragging');\n\n            // move current slide\n            this.setTranslate(this.$slide.eq(this.index), distance, 0);\n\n            // move next and prev slide with current slide\n            this.setTranslate($('.lg-prev-slide'), -this.$slide.eq(this.index).width() + distance, 0);\n            this.setTranslate($('.lg-next-slide'), this.$slide.eq(this.index).width() + distance, 0);\n        }\n    };\n\n    Plugin.prototype.touchEnd = function(distance) {\n        var _this = this;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (_this.s.mode !== 'lg-slide') {\n            _this.$outer.addClass('lg-slide');\n        }\n\n        this.$slide.not('.lg-current, .lg-prev-slide, .lg-next-slide').css('opacity', '0');\n\n        // set transition duration\n        setTimeout(function() {\n            _this.$outer.removeClass('lg-dragging');\n            if ((distance < 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToNextSlide(true);\n            } else if ((distance > 0) && (Math.abs(distance) > _this.s.swipeThreshold)) {\n                _this.goToPrevSlide(true);\n            } else if (Math.abs(distance) < 5) {\n\n                // Trigger click if distance is less than 5 pix\n                _this.$el.trigger('onSlideClick.lg');\n            }\n\n            _this.$slide.removeAttr('style');\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function() {\n            if (!_this.$outer.hasClass('lg-dragging') && _this.s.mode !== 'lg-slide') {\n                _this.$outer.removeClass('lg-slide');\n            }\n        }, _this.s.speed + 100);\n\n    };\n\n    Plugin.prototype.enableSwipe = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isMoved = false;\n\n        if (_this.s.enableSwipe && _this.doCss()) {\n\n            _this.$slide.on('touchstart.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed') && !_this.lgBusy) {\n                    e.preventDefault();\n                    _this.manageSwipeClass();\n                    startCoords = e.originalEvent.targetTouches[0].pageX;\n                }\n            });\n\n            _this.$slide.on('touchmove.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    e.preventDefault();\n                    endCoords = e.originalEvent.targetTouches[0].pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    isMoved = true;\n                }\n            });\n\n            _this.$slide.on('touchend.lg', function() {\n                if (!_this.$outer.hasClass('lg-zoomed')) {\n                    if (isMoved) {\n                        isMoved = false;\n                        _this.touchEnd(endCoords - startCoords);\n                    } else {\n                        _this.$el.trigger('onSlideClick.lg');\n                    }\n                }\n            });\n        }\n\n    };\n\n    Plugin.prototype.enableDrag = function() {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isDraging = false;\n        var isMoved = false;\n        if (_this.s.enableDrag && _this.doCss()) {\n            _this.$slide.on('mousedown.lg', function(e) {\n                if (!_this.$outer.hasClass('lg-zoomed') && !_this.lgBusy && !$(e.target).text().trim()) {\n                    e.preventDefault();\n                    _this.manageSwipeClass();\n                    startCoords = e.pageX;\n                    isDraging = true;\n\n                    // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                    _this.$outer.scrollLeft += 1;\n                    _this.$outer.scrollLeft -= 1;\n\n                    // *\n\n                    _this.$outer.removeClass('lg-grab').addClass('lg-grabbing');\n\n                    _this.$el.trigger('onDragstart.lg');\n                }\n            });\n\n            $(window).on('mousemove.lg', function(e) {\n                if (isDraging) {\n                    isMoved = true;\n                    endCoords = e.pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    _this.$el.trigger('onDragmove.lg');\n                }\n            });\n\n            $(window).on('mouseup.lg', function(e) {\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords - startCoords);\n                    _this.$el.trigger('onDragend.lg');\n                } else if ($(e.target).hasClass('lg-object') || $(e.target).hasClass('lg-video-play')) {\n                    _this.$el.trigger('onSlideClick.lg');\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _this.$outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n\n        }\n    };\n\n    Plugin.prototype.manageSwipeClass = function() {\n        var _touchNext = this.index + 1;\n        var _touchPrev = this.index - 1;\n        if (this.s.loop && this.$slide.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.$slide.length - 1;\n            } else if (this.index === this.$slide.length - 1) {\n                _touchNext = 0;\n            }\n        }\n\n        this.$slide.removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.$slide.eq(_touchPrev).addClass('lg-prev-slide');\n        }\n\n        this.$slide.eq(_touchNext).addClass('lg-next-slide');\n    };\n\n    Plugin.prototype.mousewheel = function() {\n        var _this = this;\n        _this.$outer.on('mousewheel.lg', function(e) {\n\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                _this.goToPrevSlide();\n            } else {\n                _this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n\n    };\n\n    Plugin.prototype.closeGallery = function() {\n\n        var _this = this;\n        var mousedown = false;\n        this.$outer.find('.lg-close').on('click.lg', function() {\n            _this.destroy();\n        });\n\n        if (_this.s.closable) {\n\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            _this.$outer.on('mousedown.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap')) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n\n            });\n            \n            _this.$outer.on('mousemove.lg', function() {\n                mousedown = false;\n            });\n\n            _this.$outer.on('mouseup.lg', function(e) {\n\n                if ($(e.target).is('.lg-outer') || $(e.target).is('.lg-item ') || $(e.target).is('.lg-img-wrap') && mousedown) {\n                    if (!_this.$outer.hasClass('lg-dragging')) {\n                        _this.destroy();\n                    }\n                }\n\n            });\n\n        }\n\n    };\n\n    Plugin.prototype.destroy = function(d) {\n\n        var _this = this;\n\n        if (!d) {\n            _this.$el.trigger('onBeforeClose.lg');\n            $(window).scrollTop(_this.prevScrollTop);\n        }\n\n\n        /**\n         * if d is false or undefined destroy will only close the gallery\n         * plugins instance remains with the element\n         *\n         * if d is true destroy will completely remove the plugin\n         */\n\n        if (d) {\n            if (!_this.s.dynamic) {\n                // only when not using dynamic mode is $items a jquery collection\n                this.$items.off('click.lg click.lgcustom');\n            }\n\n            $.removeData(_this.el, 'lightGallery');\n        }\n\n        // Unbind all events added by lightGallery\n        this.$el.off('.lg.tm');\n\n        // Distroy all lightGallery modules\n        $.each($.fn.lightGallery.modules, function(key) {\n            if (_this.modules[key]) {\n                _this.modules[key].destroy();\n            }\n        });\n\n        this.lGalleryOn = false;\n\n        clearTimeout(_this.hideBartimeout);\n        this.hideBartimeout = false;\n        $(window).off('.lg');\n        $('body').removeClass('lg-on lg-from-hash');\n\n        if (_this.$outer) {\n            _this.$outer.removeClass('lg-visible');\n        }\n\n        $('.lg-backdrop').removeClass('in');\n\n        setTimeout(function() {\n            if (_this.$outer) {\n                _this.$outer.remove();\n            }\n\n            $('.lg-backdrop').remove();\n\n            if (!d) {\n                _this.$el.trigger('onCloseAfter.lg');\n            }\n\n        }, _this.s.backdropDuration + 50);\n    };\n\n    $.fn.lightGallery = function(options) {\n        return this.each(function() {\n            if (!$.data(this, 'lightGallery')) {\n                $.data(this, 'lightGallery', new Plugin(this, options));\n            } else {\n                try {\n                    $(this).data('lightGallery').init();\n                } catch (err) {\n                    console.error('lightGallery has not initiated properly');\n                }\n            }\n        });\n    };\n\n    $.fn.lightGallery.modules = {};\n\n})();\n\n\n}));\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9kaXN0L2pzL2xpZ2h0Z2FsbGVyeS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vaG9tZS9vcHMvd29yay90ZXlhL25vZGVfbW9kdWxlcy9saWdodGdhbGxlcnkvZGlzdC9qcy9saWdodGdhbGxlcnkuanM/Mzk1MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgbGlnaHRnYWxsZXJ5IC0gdjEuNi4xMSAtIDIwMTgtMDUtMjJcbiogaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeS9cbiogQ29weXJpZ2h0IChjKSAyMDE4IFNhY2hpbiBOOyBMaWNlbnNlZCBHUEx2MyAqL1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldFxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmdW5jdGlvbiAoYTApIHtcbiAgICAgIHJldHVybiAoZmFjdG9yeShhMCkpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShyb290W1wialF1ZXJ5XCJdKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoJCkge1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuXG4gICAgICAgIG1vZGU6ICdsZy1zbGlkZScsXG5cbiAgICAgICAgLy8gRXggOiAnZWFzZSdcbiAgICAgICAgY3NzRWFzaW5nOiAnZWFzZScsXG5cbiAgICAgICAgLy8nZm9yIGpxdWVyeSBhbmltYXRpb24nXG4gICAgICAgIGVhc2luZzogJ2xpbmVhcicsXG4gICAgICAgIHNwZWVkOiA2MDAsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBhZGRDbGFzczogJycsXG4gICAgICAgIHN0YXJ0Q2xhc3M6ICdsZy1zdGFydC16b29tJyxcbiAgICAgICAgYmFja2Ryb3BEdXJhdGlvbjogMTUwLFxuICAgICAgICBoaWRlQmFyc0RlbGF5OiA2MDAwLFxuXG4gICAgICAgIHVzZUxlZnQ6IGZhbHNlLFxuXG4gICAgICAgIGNsb3NhYmxlOiB0cnVlLFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBlc2NLZXk6IHRydWUsXG4gICAgICAgIGtleVByZXNzOiB0cnVlLFxuICAgICAgICBjb250cm9sczogdHJ1ZSxcbiAgICAgICAgc2xpZGVFbmRBbmltYXRvaW46IHRydWUsXG4gICAgICAgIGhpZGVDb250cm9sT25FbmQ6IGZhbHNlLFxuICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxuXG4gICAgICAgIGdldENhcHRpb25Gcm9tVGl0bGVPckFsdDogdHJ1ZSxcblxuICAgICAgICAvLyAubGctaXRlbSB8fCAnLmxnLXN1Yi1odG1sJ1xuICAgICAgICBhcHBlbmRTdWJIdG1sVG86ICcubGctc3ViLWh0bWwnLFxuXG4gICAgICAgIHN1Ykh0bWxTZWxlY3RvclJlbGF0aXZlOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2MgbnVtYmVyIG9mIHByZWxvYWQgc2xpZGVzXG4gICAgICAgICAqIHdpbGwgZXhpY3V0ZSBvbmx5IGFmdGVyIHRoZSBjdXJyZW50IHNsaWRlIGlzIGZ1bGx5IGxvYWRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4IHlvdSBjbGlja2VkIG9uIDR0aCBpbWFnZSBhbmQgaWYgcHJlbG9hZCA9IDEgdGhlbiAzcmQgc2xpZGUgYW5kIDV0aFxuICAgICAgICAgKiBzbGlkZSB3aWxsIGJlIGxvYWRlZCBpbiB0aGUgYmFja2dyb3VuZCBhZnRlciB0aGUgNHRoIHNsaWRlIGlzIGZ1bGx5IGxvYWRlZC4uXG4gICAgICAgICAqIGlmIHByZWxvYWQgaXMgMiB0aGVuIDJuZCAzcmQgNXRoIDZ0aCBzbGlkZXMgd2lsbCBiZSBwcmVsb2FkZWQuLiAuLi4gLi4uXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICBwcmVsb2FkOiAxLFxuICAgICAgICBzaG93QWZ0ZXJMb2FkOiB0cnVlLFxuICAgICAgICBzZWxlY3RvcjogJycsXG4gICAgICAgIHNlbGVjdFdpdGhpbjogJycsXG4gICAgICAgIG5leHRIdG1sOiAnJyxcbiAgICAgICAgcHJldkh0bWw6ICcnLFxuXG4gICAgICAgIC8vIDAsIDFcbiAgICAgICAgaW5kZXg6IGZhbHNlLFxuXG4gICAgICAgIGlmcmFtZU1heFdpZHRoOiAnMTAwJScsXG5cbiAgICAgICAgZG93bmxvYWQ6IHRydWUsXG4gICAgICAgIGNvdW50ZXI6IHRydWUsXG4gICAgICAgIGFwcGVuZENvdW50ZXJUbzogJy5sZy10b29sYmFyJyxcblxuICAgICAgICBzd2lwZVRocmVzaG9sZDogNTAsXG4gICAgICAgIGVuYWJsZVN3aXBlOiB0cnVlLFxuICAgICAgICBlbmFibGVEcmFnOiB0cnVlLFxuXG4gICAgICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgICAgICBkeW5hbWljRWw6IFtdLFxuICAgICAgICBnYWxsZXJ5SWQ6IDFcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUGx1Z2luKGVsZW1lbnQsIG9wdGlvbnMpIHtcblxuICAgICAgICAvLyBDdXJyZW50IGxpZ2h0R2FsbGVyeSBlbGVtZW50XG4gICAgICAgIHRoaXMuZWwgPSBlbGVtZW50O1xuXG4gICAgICAgIC8vIEN1cnJlbnQganF1ZXJ5IGVsZW1lbnRcbiAgICAgICAgdGhpcy4kZWwgPSAkKGVsZW1lbnQpO1xuXG4gICAgICAgIC8vIGxpZ2h0R2FsbGVyeSBzZXR0aW5nc1xuICAgICAgICB0aGlzLnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgZHluYW1pYyBtb2RlLCBlbnN1cmUgZHluYW1pY0VsIGlzIGFuIGFycmF5XG4gICAgICAgIGlmICh0aGlzLnMuZHluYW1pYyAmJiB0aGlzLnMuZHluYW1pY0VsICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLnMuZHluYW1pY0VsLmNvbnN0cnVjdG9yID09PSBBcnJheSAmJiAhdGhpcy5zLmR5bmFtaWNFbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93ICgnV2hlbiB1c2luZyBkeW5hbWljIG1vZGUsIHlvdSBtdXN0IGFsc28gZGVmaW5lIGR5bmFtaWNFbCBhcyBhbiBBcnJheS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxpZ2h0R2FsbGVyeSBtb2R1bGVzXG4gICAgICAgIHRoaXMubW9kdWxlcyA9IHt9O1xuXG4gICAgICAgIC8vIGZhbHNlIHdoZW4gbGlnaHRnYWxsZXJ5IGNvbXBsZXRlIGZpcnN0IHNsaWRlO1xuICAgICAgICB0aGlzLmxHYWxsZXJ5T24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmxnQnVzeSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFRpbWVvdXQgZnVuY3Rpb24gZm9yIGhpZGluZyBjb250cm9scztcbiAgICAgICAgdGhpcy5oaWRlQmFydGltZW91dCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFRvIGRldGVybWluZSBicm93c2VyIHN1cHBvcnRzIGZvciB0b3VjaCBldmVudHM7XG4gICAgICAgIHRoaXMuaXNUb3VjaCA9ICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuXG4gICAgICAgIC8vIERpc2FibGUgaGlkZUNvbnRyb2xPbkVuZCBpZiBzaWxkZUVuZEFuaW1hdGlvbiBpcyB0cnVlXG4gICAgICAgIGlmICh0aGlzLnMuc2xpZGVFbmRBbmltYXRvaW4pIHtcbiAgICAgICAgICAgIHRoaXMucy5oaWRlQ29udHJvbE9uRW5kID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHYWxsZXJ5IGl0ZW1zXG4gICAgICAgIGlmICh0aGlzLnMuZHluYW1pYykge1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMgPSB0aGlzLnMuZHluYW1pY0VsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMucy5zZWxlY3RvciA9PT0gJ3RoaXMnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMgPSB0aGlzLiRlbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zLnNlbGVjdG9yICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnMuc2VsZWN0V2l0aGluKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGl0ZW1zID0gJCh0aGlzLnMuc2VsZWN0V2l0aGluKS5maW5kKHRoaXMucy5zZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMgPSB0aGlzLiRlbC5maW5kKCQodGhpcy5zLnNlbGVjdG9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpdGVtcyA9IHRoaXMuJGVsLmNoaWxkcmVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAubGctaXRlbVxuICAgICAgICB0aGlzLiRzbGlkZSA9ICcnO1xuXG4gICAgICAgIC8vIC5sZy1vdXRlclxuICAgICAgICB0aGlzLiRvdXRlciA9ICcnO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIFBsdWdpbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgLy8gcy5wcmVsb2FkIHNob3VsZCBub3QgYmUgbW9yZSB0aGFuICRpdGVtLmxlbmd0aFxuICAgICAgICBpZiAoX3RoaXMucy5wcmVsb2FkID4gX3RoaXMuJGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgX3RoaXMucy5wcmVsb2FkID0gX3RoaXMuJGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGR5bmFtaWMgb3B0aW9uIGlzIGVuYWJsZWQgZXhlY3V0ZSBpbW1lZGlhdGVseVxuICAgICAgICB2YXIgX2hhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcbiAgICAgICAgaWYgKF9oYXNoLmluZGV4T2YoJ2xnPScgKyB0aGlzLnMuZ2FsbGVyeUlkKSA+IDApIHtcblxuICAgICAgICAgICAgX3RoaXMuaW5kZXggPSBwYXJzZUludChfaGFzaC5zcGxpdCgnJnNsaWRlPScpWzFdLCAxMCk7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbGctZnJvbS1oYXNoJyk7XG4gICAgICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygnbGctb24nKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJ1aWxkKF90aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnbGctb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdGhpcy5zLmR5bmFtaWMpIHtcblxuICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uQmVmb3JlT3Blbi5sZycpO1xuXG4gICAgICAgICAgICBfdGhpcy5pbmRleCA9IF90aGlzLnMuaW5kZXggfHwgMDtcblxuICAgICAgICAgICAgLy8gcHJldmVudCBhY2NpZGVudGFsIGRvdWJsZSBleGVjdXRpb25cbiAgICAgICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdsZy1vbicpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnVpbGQoX3RoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2xnLW9uJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIC8vIFVzaW5nIGRpZmZlcmVudCBuYW1lc3BhY2UgZm9yIGNsaWNrIGJlY2F1c2UgY2xpY2sgZXZlbnQgc2hvdWxkIG5vdCB1bmJpbmQgaWYgc2VsZWN0b3IgaXMgc2FtZSBvYmplY3QoJ3RoaXMnKVxuICAgICAgICAgICAgX3RoaXMuJGl0ZW1zLm9uKCdjbGljay5sZ2N1c3RvbScsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAvLyBGb3IgSUU4XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcikge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkJlZm9yZU9wZW4ubGcnKTtcblxuICAgICAgICAgICAgICAgIF90aGlzLmluZGV4ID0gX3RoaXMucy5pbmRleCB8fCBfdGhpcy4kaXRlbXMuaW5kZXgodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IGFjY2lkZW50YWwgZG91YmxlIGV4ZWN1dGlvblxuICAgICAgICAgICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdsZy1vbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmJ1aWxkKF90aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdsZy1vbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgUGx1Z2luLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBfdGhpcy5zdHJ1Y3R1cmUoKTtcblxuICAgICAgICAvLyBtb2R1bGUgY29uc3RydWN0b3JcbiAgICAgICAgJC5lYWNoKCQuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgX3RoaXMubW9kdWxlc1trZXldID0gbmV3ICQuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXNba2V5XShfdGhpcy5lbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGluaXRpYXRlIHNsaWRlIGZ1bmN0aW9uXG4gICAgICAgIF90aGlzLnNsaWRlKGluZGV4LCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcblxuICAgICAgICBpZiAoX3RoaXMucy5rZXlQcmVzcykge1xuICAgICAgICAgICAgX3RoaXMua2V5UHJlc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdGhpcy4kaXRlbXMubGVuZ3RoID4gMSkge1xuXG4gICAgICAgICAgICBfdGhpcy5hcnJvdygpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmVuYWJsZURyYWcoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbmFibGVTd2lwZSgpO1xuICAgICAgICAgICAgfSwgNTApO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMucy5tb3VzZXdoZWVsKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubW91c2V3aGVlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuJHNsaWRlLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvblNsaWRlQ2xpY2subGcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuY291bnRlcigpO1xuXG4gICAgICAgIF90aGlzLmNsb3NlR2FsbGVyeSgpO1xuXG4gICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkFmdGVyT3Blbi5sZycpO1xuXG4gICAgICAgIC8vIEhpZGUgY29udHJvbGxlcnMgaWYgbW91c2UgZG9lc24ndCBtb3ZlIGZvciBzb21lIHBlcmlvZFxuICAgICAgICBfdGhpcy4kb3V0ZXIub24oJ21vdXNlbW92ZS5sZyBjbGljay5sZyB0b3VjaHN0YXJ0LmxnJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIF90aGlzLiRvdXRlci5yZW1vdmVDbGFzcygnbGctaGlkZS1pdGVtcycpO1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuaGlkZUJhcnRpbWVvdXQpO1xuXG4gICAgICAgICAgICAvLyBUaW1lb3V0IHdpbGwgYmUgY2xlYXJlZCBvbiBlYWNoIHNsaWRlIG1vdmVtZW50IGFsc29cbiAgICAgICAgICAgIF90aGlzLmhpZGVCYXJ0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLWhpZGUtaXRlbXMnKTtcbiAgICAgICAgICAgIH0sIF90aGlzLnMuaGlkZUJhcnNEZWxheSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3RoaXMuJG91dGVyLnRyaWdnZXIoJ21vdXNlbW92ZS5sZycpO1xuXG4gICAgfTtcblxuICAgIFBsdWdpbi5wcm90b3R5cGUuc3RydWN0dXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsaXN0ID0gJyc7XG4gICAgICAgIHZhciBjb250cm9scyA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBzdWJIdG1sQ29udCA9ICcnO1xuICAgICAgICB2YXIgdGVtcGxhdGU7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImxnLWJhY2tkcm9wXCI+PC9kaXY+Jyk7XG4gICAgICAgICQoJy5sZy1iYWNrZHJvcCcpLmNzcygndHJhbnNpdGlvbi1kdXJhdGlvbicsIHRoaXMucy5iYWNrZHJvcER1cmF0aW9uICsgJ21zJyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGdhbGxlcnkgaXRlbXNcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuJGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0ICs9ICc8ZGl2IGNsYXNzPVwibGctaXRlbVwiPjwvZGl2Pic7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgY29udHJvbGxzXG4gICAgICAgIGlmICh0aGlzLnMuY29udHJvbHMgJiYgdGhpcy4kaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29udHJvbHMgPSAnPGRpdiBjbGFzcz1cImxnLWFjdGlvbnNcIj4nICtcbiAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImxnLXByZXYgbGctaWNvblwiPicgKyB0aGlzLnMucHJldkh0bWwgKyAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJsZy1uZXh0IGxnLWljb25cIj4nICsgdGhpcy5zLm5leHRIdG1sICsgJzwvYnV0dG9uPicgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8gPT09ICcubGctc3ViLWh0bWwnKSB7XG4gICAgICAgICAgICBzdWJIdG1sQ29udCA9ICc8ZGl2IGNsYXNzPVwibGctc3ViLWh0bWxcIj48L2Rpdj4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImxnLW91dGVyICcgKyB0aGlzLnMuYWRkQ2xhc3MgKyAnICcgKyB0aGlzLnMuc3RhcnRDbGFzcyArICdcIj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibGdcIiBzdHlsZT1cIndpZHRoOicgKyB0aGlzLnMud2lkdGggKyAnOyBoZWlnaHQ6JyArIHRoaXMucy5oZWlnaHQgKyAnXCI+JyArXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxnLWlubmVyXCI+JyArIGxpc3QgKyAnPC9kaXY+JyArXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cImxnLXRvb2xiYXIgbGctZ3JvdXBcIj4nICtcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImxnLWNsb3NlIGxnLWljb25cIj48L3NwYW4+JyArXG4gICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICBjb250cm9scyArXG4gICAgICAgICAgICBzdWJIdG1sQ29udCArXG4gICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAnPC9kaXY+JztcblxuICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRlbXBsYXRlKTtcbiAgICAgICAgdGhpcy4kb3V0ZXIgPSAkKCcubGctb3V0ZXInKTtcbiAgICAgICAgdGhpcy4kc2xpZGUgPSB0aGlzLiRvdXRlci5maW5kKCcubGctaXRlbScpO1xuXG4gICAgICAgIGlmICh0aGlzLnMudXNlTGVmdCkge1xuICAgICAgICAgICAgdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLXVzZS1sZWZ0Jyk7XG5cbiAgICAgICAgICAgIC8vIFNldCBtb2RlIGxnLXNsaWRlIGlmIHVzZSBsZWZ0IGlzIHRydWU7XG4gICAgICAgICAgICB0aGlzLnMubW9kZSA9ICdsZy1zbGlkZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRvdXRlci5hZGRDbGFzcygnbGctdXNlLWNzczMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvciBmaXhlZCBoZWlnaHQgZ2FsbGVyeVxuICAgICAgICBfdGhpcy5zZXRUb3AoKTtcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUubGcgb3JpZW50YXRpb25jaGFuZ2UubGcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0VG9wKCk7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgY2xhc3MgbGctY3VycmVudCB0byByZW1vdmUgaW5pdGlhbCB0cmFuc2l0aW9uXG4gICAgICAgIHRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLmFkZENsYXNzKCdsZy1jdXJyZW50Jyk7XG5cbiAgICAgICAgLy8gYWRkIENsYXNzIGZvciBjc3Mgc3VwcG9ydCBhbmQgdHJhbnNpdGlvbiBtb2RlXG4gICAgICAgIGlmICh0aGlzLmRvQ3NzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuJG91dGVyLmFkZENsYXNzKCdsZy1jc3MzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRvdXRlci5hZGRDbGFzcygnbGctY3NzJyk7XG5cbiAgICAgICAgICAgIC8vIFNldCBzcGVlZCAwIGJlY2F1c2Ugbm8gYW5pbWF0aW9uIHdpbGwgaGFwcGVuIGlmIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGNzczNcbiAgICAgICAgICAgIHRoaXMucy5zcGVlZCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRvdXRlci5hZGRDbGFzcyh0aGlzLnMubW9kZSk7XG5cbiAgICAgICAgaWYgKHRoaXMucy5lbmFibGVEcmFnICYmIHRoaXMuJGl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuJG91dGVyLmFkZENsYXNzKCdsZy1ncmFiJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zLnNob3dBZnRlckxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJG91dGVyLmFkZENsYXNzKCdsZy1zaG93LWFmdGVyLWxvYWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRvQ3NzKCkpIHtcbiAgICAgICAgICAgIHZhciAkaW5uZXIgPSB0aGlzLiRvdXRlci5maW5kKCcubGctaW5uZXInKTtcbiAgICAgICAgICAgICRpbm5lci5jc3MoJ3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgdGhpcy5zLmNzc0Vhc2luZyk7XG4gICAgICAgICAgICAkaW5uZXIuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJywgdGhpcy5zLnNwZWVkICsgJ21zJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmxnLWJhY2tkcm9wJykuYWRkQ2xhc3MoJ2luJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLXZpc2libGUnKTtcbiAgICAgICAgfSwgdGhpcy5zLmJhY2tkcm9wRHVyYXRpb24pO1xuXG4gICAgICAgIGlmICh0aGlzLnMuZG93bmxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuJG91dGVyLmZpbmQoJy5sZy10b29sYmFyJykuYXBwZW5kKCc8YSBpZD1cImxnLWRvd25sb2FkXCIgdGFyZ2V0PVwiX2JsYW5rXCIgZG93bmxvYWQgY2xhc3M9XCJsZy1kb3dubG9hZCBsZy1pY29uXCI+PC9hPicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsIHRvcCB2YWx1ZSB0byBzY3JvbGwgYmFjayBhZnRlciBjbG9zaW5nIHRoZSBnYWxsZXJ5Li5cbiAgICAgICAgdGhpcy5wcmV2U2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgfTtcblxuICAgIC8vIEZvciBmaXhlZCBoZWlnaHQgZ2FsbGVyeVxuICAgIFBsdWdpbi5wcm90b3R5cGUuc2V0VG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnMuaGVpZ2h0ICE9PSAnMTAwJScpIHtcbiAgICAgICAgICAgIHZhciB3SCA9ICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciB0b3AgPSAod0ggLSBwYXJzZUludCh0aGlzLnMuaGVpZ2h0LCAxMCkpIC8gMjtcbiAgICAgICAgICAgIHZhciAkbEdhbGxlcnkgPSB0aGlzLiRvdXRlci5maW5kKCcubGcnKTtcbiAgICAgICAgICAgIGlmICh3SCA+PSBwYXJzZUludCh0aGlzLnMuaGVpZ2h0LCAxMCkpIHtcbiAgICAgICAgICAgICAgICAkbEdhbGxlcnkuY3NzKCd0b3AnLCB0b3AgKyAncHgnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGxHYWxsZXJ5LmNzcygndG9wJywgJzBweCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEZpbmQgY3NzMyBzdXBwb3J0XG4gICAgUGx1Z2luLnByb3RvdHlwZS5kb0NzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjaGVjayBmb3IgY3NzIGFuaW1hdGlvbiBzdXBwb3J0XG4gICAgICAgIHZhciBzdXBwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IFsndHJhbnNpdGlvbicsICdNb3pUcmFuc2l0aW9uJywgJ1dlYmtpdFRyYW5zaXRpb24nLCAnT1RyYW5zaXRpb24nLCAnbXNUcmFuc2l0aW9uJywgJ0todG1sVHJhbnNpdGlvbiddO1xuICAgICAgICAgICAgdmFyIHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJhbnNpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uW2ldIGluIHJvb3Quc3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzdXBwb3J0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgQGRlc2MgQ2hlY2sgdGhlIGdpdmVuIHNyYyBpcyB2aWRlb1xuICAgICAqICBAcGFyYW0ge1N0cmluZ30gc3JjXG4gICAgICogIEByZXR1cm4ge09iamVjdH0gdmlkZW8gdHlwZVxuICAgICAqICBFeDp7IHlvdXR1YmUgIDogIFtcIi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9YzBhc0pnU3l4Y1lcIiwgXCJjMGFzSmdTeXhjWVwiXSB9XG4gICAgICovXG4gICAgUGx1Z2luLnByb3RvdHlwZS5pc1ZpZGVvID0gZnVuY3Rpb24oc3JjLCBpbmRleCkge1xuXG4gICAgICAgIHZhciBodG1sO1xuICAgICAgICBpZiAodGhpcy5zLmR5bmFtaWMpIHtcbiAgICAgICAgICAgIGh0bWwgPSB0aGlzLnMuZHluYW1pY0VsW2luZGV4XS5odG1sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHRtbCA9IHRoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLWh0bWwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3JjKSB7XG4gICAgICAgICAgICBpZihodG1sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbDU6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsaWdodEdhbGxlcnkgOi0gZGF0YS1zcmMgaXMgbm90IHB2b3ZpZGVkIG9uIHNsaWRlIGl0ZW0gJyArIChpbmRleCArIDEpICsgJy4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgc2VsZWN0b3IgcHJvcGVydHkgaXMgcHJvcGVybHkgY29uZmlndXJlZC4gTW9yZSBpbmZvIC0gaHR0cDovL3NhY2hpbmNob29sdXIuZ2l0aHViLmlvL2xpZ2h0R2FsbGVyeS9kZW1vcy9odG1sLW1hcmt1cC5odG1sJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHlvdXR1YmUgPSBzcmMubWF0Y2goL1xcL1xcLyg/Ond3d1xcLik/eW91dHUoPzpcXC5iZXxiZVxcLmNvbXxiZS1ub2Nvb2tpZVxcLmNvbSlcXC8oPzp3YXRjaFxcP3Y9fGVtYmVkXFwvKT8oW2EtejAtOVxcLVxcX1xcJV0rKS9pKTtcbiAgICAgICAgdmFyIHZpbWVvID0gc3JjLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pP3ZpbWVvLmNvbVxcLyhbMC05YS16XFwtX10rKS9pKTtcbiAgICAgICAgdmFyIGRhaWx5bW90aW9uID0gc3JjLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pP2RhaS5seVxcLyhbMC05YS16XFwtX10rKS9pKTtcbiAgICAgICAgdmFyIHZrID0gc3JjLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pPyg/OnZrXFwuY29tfHZrb250YWt0ZVxcLnJ1KVxcLyg/OnZpZGVvX2V4dFxcLnBocFxcPykoLiopL2kpO1xuXG4gICAgICAgIGlmICh5b3V0dWJlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHlvdXR1YmU6IHlvdXR1YmVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodmltZW8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmltZW86IHZpbWVvXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGRhaWx5bW90aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhaWx5bW90aW9uOiBkYWlseW1vdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmICh2aykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2azogdmtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIEBkZXNjIENyZWF0ZSBpbWFnZSBjb3VudGVyXG4gICAgICogIEV4OiAxLzEwXG4gICAgICovXG4gICAgUGx1Z2luLnByb3RvdHlwZS5jb3VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnMuY291bnRlcikge1xuICAgICAgICAgICAgJCh0aGlzLnMuYXBwZW5kQ291bnRlclRvKS5hcHBlbmQoJzxkaXYgaWQ9XCJsZy1jb3VudGVyXCI+PHNwYW4gaWQ9XCJsZy1jb3VudGVyLWN1cnJlbnRcIj4nICsgKHBhcnNlSW50KHRoaXMuaW5kZXgsIDEwKSArIDEpICsgJzwvc3Bhbj4gLyA8c3BhbiBpZD1cImxnLWNvdW50ZXItYWxsXCI+JyArIHRoaXMuJGl0ZW1zLmxlbmd0aCArICc8L3NwYW4+PC9kaXY+Jyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIEBkZXNjIGFkZCBzdWItaHRtbCBpbnRvIHRoZSBzbGlkZVxuICAgICAqICBAcGFyYW0ge051bWJlcn0gaW5kZXggLSBpbmRleCBvZiB0aGUgc2xpZGVcbiAgICAgKi9cbiAgICBQbHVnaW4ucHJvdG90eXBlLmFkZEh0bWwgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICB2YXIgc3ViSHRtbCA9IG51bGw7XG4gICAgICAgIHZhciBzdWJIdG1sVXJsO1xuICAgICAgICB2YXIgJGN1cnJlbnRFbGU7XG4gICAgICAgIGlmICh0aGlzLnMuZHluYW1pYykge1xuICAgICAgICAgICAgaWYgKHRoaXMucy5keW5hbWljRWxbaW5kZXhdLnN1Ykh0bWxVcmwpIHtcbiAgICAgICAgICAgICAgICBzdWJIdG1sVXJsID0gdGhpcy5zLmR5bmFtaWNFbFtpbmRleF0uc3ViSHRtbFVybDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3ViSHRtbCA9IHRoaXMucy5keW5hbWljRWxbaW5kZXhdLnN1Ykh0bWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY3VycmVudEVsZSA9IHRoaXMuJGl0ZW1zLmVxKGluZGV4KTtcbiAgICAgICAgICAgIGlmICgkY3VycmVudEVsZS5hdHRyKCdkYXRhLXN1Yi1odG1sLXVybCcpKSB7XG4gICAgICAgICAgICAgICAgc3ViSHRtbFVybCA9ICRjdXJyZW50RWxlLmF0dHIoJ2RhdGEtc3ViLWh0bWwtdXJsJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1Ykh0bWwgPSAkY3VycmVudEVsZS5hdHRyKCdkYXRhLXN1Yi1odG1sJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucy5nZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQgJiYgIXN1Ykh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViSHRtbCA9ICRjdXJyZW50RWxlLmF0dHIoJ3RpdGxlJykgfHwgJGN1cnJlbnRFbGUuZmluZCgnaW1nJykuZmlyc3QoKS5hdHRyKCdhbHQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXN1Ykh0bWxVcmwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ViSHRtbCAhPT0gJ3VuZGVmaW5lZCcgJiYgc3ViSHRtbCAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGZpcnN0IGxldHRlciBvZiBzdWJodG1sXG4gICAgICAgICAgICAgICAgLy8gaWYgZmlyc3QgbGV0dGVyIHN0YXJ0cyB3aXRoIC4gb3IgIyBnZXQgdGhlIGh0bWwgZm9ybSB0aGUgalF1ZXJ5IG9iamVjdFxuICAgICAgICAgICAgICAgIHZhciBmTCA9IHN1Ykh0bWwuc3Vic3RyaW5nKDAsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChmTCA9PT0gJy4nIHx8IGZMID09PSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucy5zdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZSAmJiAhdGhpcy5zLmR5bmFtaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ykh0bWwgPSAkY3VycmVudEVsZS5maW5kKHN1Ykh0bWwpLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ykh0bWwgPSAkKHN1Ykh0bWwpLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3ViSHRtbCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8gPT09ICcubGctc3ViLWh0bWwnKSB7XG5cbiAgICAgICAgICAgIGlmIChzdWJIdG1sVXJsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kb3V0ZXIuZmluZCh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvKS5sb2FkKHN1Ykh0bWxVcmwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmh0bWwoc3ViSHRtbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWYgKHN1Ykh0bWxVcmwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzbGlkZS5lcShpbmRleCkubG9hZChzdWJIdG1sVXJsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2xpZGUuZXEoaW5kZXgpLmFwcGVuZChzdWJIdG1sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBsZy1lbXB0eS1odG1sIGNsYXNzIGlmIHRpdGxlIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgaWYgKHR5cGVvZiBzdWJIdG1sICE9PSAndW5kZWZpbmVkJyAmJiBzdWJIdG1sICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoc3ViSHRtbCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRvdXRlci5maW5kKHRoaXMucy5hcHBlbmRTdWJIdG1sVG8pLmFkZENsYXNzKCdsZy1lbXB0eS1odG1sJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuJG91dGVyLmZpbmQodGhpcy5zLmFwcGVuZFN1Ykh0bWxUbykucmVtb3ZlQ2xhc3MoJ2xnLWVtcHR5LWh0bWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ29uQWZ0ZXJBcHBlbmRTdWJIdG1sLmxnJywgW2luZGV4XSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICBAZGVzYyBQcmVsb2FkIHNsaWRlc1xuICAgICAqICBAcGFyYW0ge051bWJlcn0gaW5kZXggLSBpbmRleCBvZiB0aGUgc2xpZGVcbiAgICAgKi9cbiAgICBQbHVnaW4ucHJvdG90eXBlLnByZWxvYWQgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICB2YXIgaSA9IDE7XG4gICAgICAgIHZhciBqID0gMTtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8PSB0aGlzLnMucHJlbG9hZDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA+PSB0aGlzLiRpdGVtcy5sZW5ndGggLSBpbmRleCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxvYWRDb250ZW50KGluZGV4ICsgaSwgZmFsc2UsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChqID0gMTsgaiA8PSB0aGlzLnMucHJlbG9hZDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggLSBqIDwgMCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxvYWRDb250ZW50KGluZGV4IC0gaiwgZmFsc2UsIDApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICBAZGVzYyBMb2FkIHNsaWRlIGNvbnRlbnQgaW50byBzbGlkZS5cbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gaW5kZXggb2YgdGhlIHNsaWRlLlxuICAgICAqICBAcGFyYW0ge0Jvb2xlYW59IHJlYyAtIGlmIHRydWUgY2FsbCBsb2FkY29udGVudCgpIGZ1bmN0aW9uIGFnYWluLlxuICAgICAqICBAcGFyYW0ge0Jvb2xlYW59IGRlbGF5IC0gZGVsYXkgZm9yIGFkZGluZyBjb21wbGV0ZSBjbGFzcy4gaXQgaXMgMCBleGNlcHQgZmlyc3QgdGltZS5cbiAgICAgKi9cbiAgICBQbHVnaW4ucHJvdG90eXBlLmxvYWRDb250ZW50ID0gZnVuY3Rpb24oaW5kZXgsIHJlYywgZGVsYXkpIHtcblxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2hhc1Bvc3RlciA9IGZhbHNlO1xuICAgICAgICB2YXIgXyRpbWc7XG4gICAgICAgIHZhciBfc3JjO1xuICAgICAgICB2YXIgX3Bvc3RlcjtcbiAgICAgICAgdmFyIF9zcmNzZXQ7XG4gICAgICAgIHZhciBfc2l6ZXM7XG4gICAgICAgIHZhciBfaHRtbDtcbiAgICAgICAgdmFyIGdldFJlc3BvbnNpdmVTcmMgPSBmdW5jdGlvbihzcmNJdG1zKSB7XG4gICAgICAgICAgICB2YXIgcnNXaWR0aCA9IFtdO1xuICAgICAgICAgICAgdmFyIHJzU3JjID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNyY0l0bXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgX19zcmMgPSBzcmNJdG1zW2ldLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBNYW5hZ2UgZW1wdHkgc3BhY2VcbiAgICAgICAgICAgICAgICBpZiAoX19zcmNbMF0gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fc3JjLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByc1NyYy5wdXNoKF9fc3JjWzBdKTtcbiAgICAgICAgICAgICAgICByc1dpZHRoLnB1c2goX19zcmNbMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJzV2lkdGgubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQocnNXaWR0aFtqXSwgMTApID4gd1dpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIF9zcmMgPSByc1NyY1tqXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChfdGhpcy5zLmR5bmFtaWMpIHtcblxuICAgICAgICAgICAgaWYgKF90aGlzLnMuZHluYW1pY0VsW2luZGV4XS5wb3N0ZXIpIHtcbiAgICAgICAgICAgICAgICBfaGFzUG9zdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfcG9zdGVyID0gX3RoaXMucy5keW5hbWljRWxbaW5kZXhdLnBvc3RlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX2h0bWwgPSBfdGhpcy5zLmR5bmFtaWNFbFtpbmRleF0uaHRtbDtcbiAgICAgICAgICAgIF9zcmMgPSBfdGhpcy5zLmR5bmFtaWNFbFtpbmRleF0uc3JjO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMucy5keW5hbWljRWxbaW5kZXhdLnJlc3BvbnNpdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3JjRHlJdG1zID0gX3RoaXMucy5keW5hbWljRWxbaW5kZXhdLnJlc3BvbnNpdmUuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICBnZXRSZXNwb25zaXZlU3JjKHNyY0R5SXRtcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9zcmNzZXQgPSBfdGhpcy5zLmR5bmFtaWNFbFtpbmRleF0uc3Jjc2V0O1xuICAgICAgICAgICAgX3NpemVzID0gX3RoaXMucy5keW5hbWljRWxbaW5kZXhdLnNpemVzO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmIChfdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmF0dHIoJ2RhdGEtcG9zdGVyJykpIHtcbiAgICAgICAgICAgICAgICBfaGFzUG9zdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfcG9zdGVyID0gX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLXBvc3RlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfaHRtbCA9IF90aGlzLiRpdGVtcy5lcShpbmRleCkuYXR0cignZGF0YS1odG1sJyk7XG4gICAgICAgICAgICBfc3JjID0gX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdocmVmJykgfHwgX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLXNyYycpO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLXJlc3BvbnNpdmUnKSkge1xuICAgICAgICAgICAgICAgIHZhciBzcmNJdG1zID0gX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLXJlc3BvbnNpdmUnKS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgICAgIGdldFJlc3BvbnNpdmVTcmMoc3JjSXRtcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9zcmNzZXQgPSBfdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmF0dHIoJ2RhdGEtc3Jjc2V0Jyk7XG4gICAgICAgICAgICBfc2l6ZXMgPSBfdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmF0dHIoJ2RhdGEtc2l6ZXMnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy9pZiAoX3NyYyB8fCBfc3Jjc2V0IHx8IF9zaXplcyB8fCBfcG9zdGVyKSB7XG5cbiAgICAgICAgdmFyIGlmcmFtZSA9IGZhbHNlO1xuICAgICAgICBpZiAoX3RoaXMucy5keW5hbWljKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMucy5keW5hbWljRWxbaW5kZXhdLmlmcmFtZSkge1xuICAgICAgICAgICAgICAgIGlmcmFtZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLWlmcmFtZScpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBpZnJhbWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9pc1ZpZGVvID0gX3RoaXMuaXNWaWRlbyhfc3JjLCBpbmRleCk7XG4gICAgICAgIGlmICghX3RoaXMuJHNsaWRlLmVxKGluZGV4KS5oYXNDbGFzcygnbGctbG9hZGVkJykpIHtcbiAgICAgICAgICAgIGlmIChpZnJhbWUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kc2xpZGUuZXEoaW5kZXgpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJsZy12aWRlby1jb250IGxnLWhhcy1pZnJhbWVcIiBzdHlsZT1cIm1heC13aWR0aDonICsgX3RoaXMucy5pZnJhbWVNYXhXaWR0aCArICdcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48aWZyYW1lIGNsYXNzPVwibGctb2JqZWN0XCIgZnJhbWVib3JkZXI9XCIwXCIgc3JjPVwiJyArIF9zcmMgKyAnXCIgIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIj48L2lmcmFtZT48L2Rpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoX2hhc1Bvc3Rlcikge1xuICAgICAgICAgICAgICAgIHZhciB2aWRlb0NsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKF9pc1ZpZGVvICYmIF9pc1ZpZGVvLnlvdXR1YmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9DbGFzcyA9ICdsZy1oYXMteW91dHViZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaXNWaWRlbyAmJiBfaXNWaWRlby52aW1lbykge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb0NsYXNzID0gJ2xnLWhhcy12aW1lbyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9DbGFzcyA9ICdsZy1oYXMtaHRtbDUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzLiRzbGlkZS5lcShpbmRleCkucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLXZpZGVvLWNvbnQgJyArIHZpZGVvQ2xhc3MgKyAnIFwiPjxkaXYgY2xhc3M9XCJsZy12aWRlb1wiPjxzcGFuIGNsYXNzPVwibGctdmlkZW8tcGxheVwiPjwvc3Bhbj48aW1nIGNsYXNzPVwibGctb2JqZWN0IGxnLWhhcy1wb3N0ZXJcIiBzcmM9XCInICsgX3Bvc3RlciArICdcIiAvPjwvZGl2PjwvZGl2PicpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF9pc1ZpZGVvKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuJHNsaWRlLmVxKGluZGV4KS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwibGctdmlkZW8tY29udCBcIj48ZGl2IGNsYXNzPVwibGctdmlkZW9cIj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignaGFzVmlkZW8ubGcnLCBbaW5kZXgsIF9zcmMsIF9odG1sXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLiRzbGlkZS5lcShpbmRleCkucHJlcGVuZCgnPGRpdiBjbGFzcz1cImxnLWltZy13cmFwXCI+PGltZyBjbGFzcz1cImxnLW9iamVjdCBsZy1pbWFnZVwiIHNyYz1cIicgKyBfc3JjICsgJ1wiIC8+PC9kaXY+Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkFmZXJBcHBlbmRTbGlkZS5sZycsIFtpbmRleF0pO1xuXG4gICAgICAgICAgICBfJGltZyA9IF90aGlzLiRzbGlkZS5lcShpbmRleCkuZmluZCgnLmxnLW9iamVjdCcpO1xuICAgICAgICAgICAgaWYgKF9zaXplcykge1xuICAgICAgICAgICAgICAgIF8kaW1nLmF0dHIoJ3NpemVzJywgX3NpemVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF9zcmNzZXQpIHtcbiAgICAgICAgICAgICAgICBfJGltZy5hdHRyKCdzcmNzZXQnLCBfc3Jjc2V0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwaWN0dXJlZmlsbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogW18kaW1nWzBdXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignbGlnaHRHYWxsZXJ5IDotIElmIHlvdSB3YW50IHNyY3NldCB0byBiZSBzdXBwb3J0ZWQgZm9yIG9sZGVyIGJyb3dzZXIgcGxlYXNlIGluY2x1ZGUgcGljdHVyZWZpbCB2ZXJzaW9uIDIgamF2YXNjcmlwdCBsaWJyYXJ5IGluIHlvdXIgZG9jdW1lbnQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyAhPT0gJy5sZy1zdWItaHRtbCcpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hZGRIdG1sKGluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3RoaXMuJHNsaWRlLmVxKGluZGV4KS5hZGRDbGFzcygnbGctbG9hZGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy4kc2xpZGUuZXEoaW5kZXgpLmZpbmQoJy5sZy1vYmplY3QnKS5vbignbG9hZC5sZyBlcnJvci5sZycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBGb3IgZmlyc3QgdGltZSBhZGQgc29tZSBkZWxheSBmb3IgZGlzcGxheWluZyB0aGUgc3RhcnQgYW5pbWF0aW9uLlxuICAgICAgICAgICAgdmFyIF9zcGVlZCA9IDA7XG5cbiAgICAgICAgICAgIC8vIERvIG5vdCBjaGFuZ2UgdGhlIGRlbGF5IHZhbHVlIGJlY2F1c2UgaXQgaXMgcmVxdWlyZWQgZm9yIHpvb20gcGx1Z2luLlxuICAgICAgICAgICAgLy8gSWYgZ2FsbGVyeSBvcGVuZWQgZnJvbSBkaXJlY3QgdXJsIChoYXNoKSBzcGVlZCB2YWx1ZSBzaG91bGQgYmUgMFxuICAgICAgICAgICAgaWYgKGRlbGF5ICYmICEkKCdib2R5JykuaGFzQ2xhc3MoJ2xnLWZyb20taGFzaCcpKSB7XG4gICAgICAgICAgICAgICAgX3NwZWVkID0gZGVsYXk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuJHNsaWRlLmVxKGluZGV4KS5hZGRDbGFzcygnbGctY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25TbGlkZUl0ZW1Mb2FkLmxnJywgW2luZGV4LCBkZWxheSB8fCAwXSk7XG4gICAgICAgICAgICB9LCBfc3BlZWQpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEB0b2RvIGNoZWNrIGxvYWQgc3RhdGUgZm9yIGh0bWw1IHZpZGVvc1xuICAgICAgICBpZiAoX2lzVmlkZW8gJiYgX2lzVmlkZW8uaHRtbDUgJiYgIV9oYXNQb3N0ZXIpIHtcbiAgICAgICAgICAgIF90aGlzLiRzbGlkZS5lcShpbmRleCkuYWRkQ2xhc3MoJ2xnLWNvbXBsZXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVjID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLiRzbGlkZS5lcShpbmRleCkuaGFzQ2xhc3MoJ2xnLWNvbXBsZXRlJykpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kc2xpZGUuZXEoaW5kZXgpLmZpbmQoJy5sZy1vYmplY3QnKS5vbignbG9hZC5sZyBlcnJvci5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmVsb2FkKGluZGV4KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJlbG9hZChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL31cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiAgIEBkZXNjIHNsaWRlIGZ1bmN0aW9uIGZvciBsaWdodGdhbGxlcnlcbiAgICAgICAgKiogU2xpZGUoKSBnZXRzIGNhbGwgb24gc3RhcnRcbiAgICAgICAgKiogKiogU2V0IGxnLm9uIHRydWUgb25jZSBzbGlkZSgpIGZ1bmN0aW9uIGdldHMgY2FsbGVkLlxuICAgICAgICAqKiBDYWxsIGxvYWRDb250ZW50KCkgb24gc2xpZGUoKSBmdW5jdGlvbiBpbnNpZGUgc2V0VGltZW91dFxuICAgICAgICAqKiAqKiBPbiBmaXJzdCBzbGlkZSB3ZSBkbyBub3Qgd2FudCBhbnkgYW5pbWF0aW9uIGxpa2Ugc2xpZGUgb2YgZmFkZVxuICAgICAgICAqKiAqKiBTbyBvbiBmaXJzdCBzbGlkZSggaWYgbGcub24gaWYgZmFsc2UgdGhhdCBpcyBmaXJzdCBzbGlkZSkgbG9hZENvbnRlbnQoKSBzaG91bGQgc3RhcnQgbG9hZGluZyBpbW1lZGlhdGVseVxuICAgICAgICAqKiAqKiBFbHNlIGxvYWRDb250ZW50KCkgc2hvdWxkIHdhaXQgZm9yIHRoZSB0cmFuc2l0aW9uIHRvIGNvbXBsZXRlLlxuICAgICAgICAqKiAqKiBTbyBzZXQgdGltZW91dCBzLnNwZWVkICsgNTBcbiAgICA8PT4gKiogbG9hZENvbnRlbnQoKSB3aWxsIGxvYWQgc2xpZGUgY29udGVudCBpbiB0byB0aGUgcGFydGljdWxhciBzbGlkZVxuICAgICAgICAqKiAqKiBJdCBoYXMgcmVjdXJzaW9uIChyZWMpIHBhcmFtZXRlci4gaWYgcmVjID09PSB0cnVlIGxvYWRDb250ZW50KCkgd2lsbCBjYWxsIHByZWxvYWQoKSBmdW5jdGlvbi5cbiAgICAgICAgKiogKiogcHJlbG9hZCB3aWxsIGV4ZWN1dGUgb25seSB3aGVuIHRoZSBwcmV2aW91cyBzbGlkZSBpcyBmdWxseSBsb2FkZWQgKGltYWdlcyBpZnJhbWUpXG4gICAgICAgICoqICoqIGF2b2lkIHNpbXVsdGFuZW91cyBpbWFnZSBsb2FkXG4gICAgPD0+ICoqIFByZWxvYWQoKSB3aWxsIGNoZWNrIGZvciBzLnByZWxvYWQgdmFsdWUgYW5kIGNhbGwgbG9hZENvbnRlbnQoKSBhZ2FpbiBhY2NvcmluZyB0byBwcmVsb2FkIHZhbHVlXG4gICAgICAgICoqIGxvYWRDb250ZW50KCkgIDw9PT09PiBQcmVsb2FkKCk7XG5cbiAgICAqICAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gaW5kZXggb2YgdGhlIHNsaWRlXG4gICAgKiAgIEBwYXJhbSB7Qm9vbGVhbn0gZnJvbVRvdWNoIC0gdHJ1ZSBpZiBzbGlkZSBmdW5jdGlvbiBjYWxsZWQgdmlhIHRvdWNoIGV2ZW50IG9yIG1vdXNlIGRyYWdcbiAgICAqICAgQHBhcmFtIHtCb29sZWFufSBmcm9tVGh1bWIgLSB0cnVlIGlmIHNsaWRlIGZ1bmN0aW9uIGNhbGxlZCB2aWEgdGh1bWJuYWlsIGNsaWNrXG4gICAgKiAgIEBwYXJhbSB7U3RyaW5nfSBkaXJlY3Rpb24gLSBEaXJlY3Rpb24gb2YgdGhlIHNsaWRlKG5leHQvcHJldilcbiAgICAqL1xuICAgIFBsdWdpbi5wcm90b3R5cGUuc2xpZGUgPSBmdW5jdGlvbihpbmRleCwgZnJvbVRvdWNoLCBmcm9tVGh1bWIsIGRpcmVjdGlvbikge1xuXG4gICAgICAgIHZhciBfcHJldkluZGV4ID0gdGhpcy4kb3V0ZXIuZmluZCgnLmxnLWN1cnJlbnQnKS5pbmRleCgpO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIFByZXZlbnQgaWYgbXVsdGlwbGUgY2FsbFxuICAgICAgICAvLyBSZXF1aXJlZCBmb3IgaHNoIHBsdWdpblxuICAgICAgICBpZiAoX3RoaXMubEdhbGxlcnlPbiAmJiAoX3ByZXZJbmRleCA9PT0gaW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2xlbmd0aCA9IHRoaXMuJHNsaWRlLmxlbmd0aDtcbiAgICAgICAgdmFyIF90aW1lID0gX3RoaXMubEdhbGxlcnlPbiA/IHRoaXMucy5zcGVlZCA6IDA7XG5cbiAgICAgICAgaWYgKCFfdGhpcy5sZ0J1c3kpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMucy5kb3dubG9hZCkge1xuICAgICAgICAgICAgICAgIHZhciBfc3JjO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zLmR5bmFtaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgX3NyYyA9IF90aGlzLnMuZHluYW1pY0VsW2luZGV4XS5kb3dubG9hZFVybCAhPT0gZmFsc2UgJiYgKF90aGlzLnMuZHluYW1pY0VsW2luZGV4XS5kb3dubG9hZFVybCB8fCBfdGhpcy5zLmR5bmFtaWNFbFtpbmRleF0uc3JjKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfc3JjID0gX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLWRvd25sb2FkLXVybCcpICE9PSAnZmFsc2UnICYmIChfdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmF0dHIoJ2RhdGEtZG93bmxvYWQtdXJsJykgfHwgX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdocmVmJykgfHwgX3RoaXMuJGl0ZW1zLmVxKGluZGV4KS5hdHRyKCdkYXRhLXNyYycpKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNsZy1kb3dubG9hZCcpLmF0dHIoJ2hyZWYnLCBfc3JjKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy1oaWRlLWRvd25sb2FkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLmFkZENsYXNzKCdsZy1oaWRlLWRvd25sb2FkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCdvbkJlZm9yZVNsaWRlLmxnJywgW19wcmV2SW5kZXgsIGluZGV4LCBmcm9tVG91Y2gsIGZyb21UaHVtYl0pO1xuXG4gICAgICAgICAgICBfdGhpcy5sZ0J1c3kgPSB0cnVlO1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuaGlkZUJhcnRpbWVvdXQpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGl0bGUgaWYgdGhpcy5zLmFwcGVuZFN1Ykh0bWxUbyA9PT0gbGctc3ViLWh0bWxcbiAgICAgICAgICAgIGlmICh0aGlzLnMuYXBwZW5kU3ViSHRtbFRvID09PSAnLmxnLXN1Yi1odG1sJykge1xuXG4gICAgICAgICAgICAgICAgLy8gd2FpdCBmb3Igc2xpZGUgYW5pbWF0aW9uIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkSHRtbChpbmRleCk7XG4gICAgICAgICAgICAgICAgfSwgX3RpbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFycm93RGlzYWJsZShpbmRleCk7XG5cbiAgICAgICAgICAgIGlmICghZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgX3ByZXZJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAncHJldic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+IF9wcmV2SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gJ25leHQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFmcm9tVG91Y2gpIHtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgdHJhbnNpdGlvbnNcbiAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLW5vLXRyYW5zJyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzbGlkZS5yZW1vdmVDbGFzcygnbGctcHJldi1zbGlkZSBsZy1uZXh0LXNsaWRlJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncHJldicpIHtcblxuICAgICAgICAgICAgICAgICAgICAvL3ByZXZzbGlkZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRzbGlkZS5lcShpbmRleCkuYWRkQ2xhc3MoJ2xnLXByZXYtc2xpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2xpZGUuZXEoX3ByZXZJbmRleCkuYWRkQ2xhc3MoJ2xnLW5leHQtc2xpZGUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5leHQgc2xpZGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2xpZGUuZXEoaW5kZXgpLmFkZENsYXNzKCdsZy1uZXh0LXNsaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHNsaWRlLmVxKF9wcmV2SW5kZXgpLmFkZENsYXNzKCdsZy1wcmV2LXNsaWRlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZ2l2ZSA1MCBtcyBmb3IgYnJvd3NlciB0byBhZGQvcmVtb3ZlIGNsYXNzXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKCdsZy1jdXJyZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9fdGhpcy4kc2xpZGUuZXEoX3ByZXZJbmRleCkucmVtb3ZlQ2xhc3MoJ2xnLWN1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHNsaWRlLmVxKGluZGV4KS5hZGRDbGFzcygnbGctY3VycmVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGFsbCB0cmFuc2l0aW9uc1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLW5vLXRyYW5zJyk7XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuJHNsaWRlLnJlbW92ZUNsYXNzKCdsZy1wcmV2LXNsaWRlIGxnLWN1cnJlbnQgbGctbmV4dC1zbGlkZScpO1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaFByZXY7XG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoTmV4dDtcbiAgICAgICAgICAgICAgICBpZiAoX2xlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hQcmV2ID0gaW5kZXggLSAxO1xuICAgICAgICAgICAgICAgICAgICB0b3VjaE5leHQgPSBpbmRleCArIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChpbmRleCA9PT0gMCkgJiYgKF9wcmV2SW5kZXggPT09IF9sZW5ndGggLSAxKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZXh0IHNsaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaE5leHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hQcmV2ID0gX2xlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGluZGV4ID09PSBfbGVuZ3RoIC0gMSkgJiYgKF9wcmV2SW5kZXggPT09IDApKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXYgc2xpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoTmV4dCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaFByZXYgPSBfbGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hQcmV2ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hOZXh0ID0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncHJldicpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHNsaWRlLmVxKHRvdWNoTmV4dCkuYWRkQ2xhc3MoJ2xnLW5leHQtc2xpZGUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kc2xpZGUuZXEodG91Y2hQcmV2KS5hZGRDbGFzcygnbGctcHJldi1zbGlkZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF90aGlzLiRzbGlkZS5lcShpbmRleCkuYWRkQ2xhc3MoJ2xnLWN1cnJlbnQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF90aGlzLmxHYWxsZXJ5T24pIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkQ29udGVudChpbmRleCwgdHJ1ZSwgMCk7XG4gICAgICAgICAgICAgICAgfSwgdGhpcy5zLnNwZWVkICsgNTApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGdCdXN5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkFmdGVyU2xpZGUubGcnLCBbX3ByZXZJbmRleCwgaW5kZXgsIGZyb21Ub3VjaCwgZnJvbVRodW1iXSk7XG4gICAgICAgICAgICAgICAgfSwgdGhpcy5zLnNwZWVkKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkQ29udGVudChpbmRleCwgdHJ1ZSwgX3RoaXMucy5iYWNrZHJvcER1cmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIF90aGlzLmxnQnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkFmdGVyU2xpZGUubGcnLCBbX3ByZXZJbmRleCwgaW5kZXgsIGZyb21Ub3VjaCwgZnJvbVRodW1iXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzLmxHYWxsZXJ5T24gPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zLmNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICAkKCcjbGctY291bnRlci1jdXJyZW50JykudGV4dChpbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuaW5kZXggPSBpbmRleDtcblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgQGRlc2MgR28gdG8gbmV4dCBzbGlkZVxuICAgICAqICBAcGFyYW0ge0Jvb2xlYW59IGZyb21Ub3VjaCAtIHRydWUgaWYgc2xpZGUgZnVuY3Rpb24gY2FsbGVkIHZpYSB0b3VjaCBldmVudFxuICAgICAqL1xuICAgIFBsdWdpbi5wcm90b3R5cGUuZ29Ub05leHRTbGlkZSA9IGZ1bmN0aW9uKGZyb21Ub3VjaCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2xvb3AgPSBfdGhpcy5zLmxvb3A7XG4gICAgICAgIGlmIChmcm9tVG91Y2ggJiYgX3RoaXMuJHNsaWRlLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgIF9sb29wID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIV90aGlzLmxnQnVzeSkge1xuICAgICAgICAgICAgaWYgKChfdGhpcy5pbmRleCArIDEpIDwgX3RoaXMuJHNsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmluZGV4Kys7XG4gICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uQmVmb3JlTmV4dFNsaWRlLmxnJywgW190aGlzLmluZGV4XSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuc2xpZGUoX3RoaXMuaW5kZXgsIGZyb21Ub3VjaCwgZmFsc2UsICduZXh0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChfbG9vcCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkJlZm9yZU5leHRTbGlkZS5sZycsIFtfdGhpcy5pbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZShfdGhpcy5pbmRleCwgZnJvbVRvdWNoLCBmYWxzZSwgJ25leHQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnMuc2xpZGVFbmRBbmltYXRvaW4gJiYgIWZyb21Ub3VjaCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLXJpZ2h0LWVuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy1yaWdodC1lbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIEBkZXNjIEdvIHRvIHByZXZpb3VzIHNsaWRlXG4gICAgICogIEBwYXJhbSB7Qm9vbGVhbn0gZnJvbVRvdWNoIC0gdHJ1ZSBpZiBzbGlkZSBmdW5jdGlvbiBjYWxsZWQgdmlhIHRvdWNoIGV2ZW50XG4gICAgICovXG4gICAgUGx1Z2luLnByb3RvdHlwZS5nb1RvUHJldlNsaWRlID0gZnVuY3Rpb24oZnJvbVRvdWNoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfbG9vcCA9IF90aGlzLnMubG9vcDtcbiAgICAgICAgaWYgKGZyb21Ub3VjaCAmJiBfdGhpcy4kc2xpZGUubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghX3RoaXMubGdCdXN5KSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5kZXgtLTtcbiAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25CZWZvcmVQcmV2U2xpZGUubGcnLCBbX3RoaXMuaW5kZXgsIGZyb21Ub3VjaF0pO1xuICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlKF90aGlzLmluZGV4LCBmcm9tVG91Y2gsIGZhbHNlLCAncHJldicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoX2xvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5kZXggPSBfdGhpcy4kaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uQmVmb3JlUHJldlNsaWRlLmxnJywgW190aGlzLmluZGV4LCBmcm9tVG91Y2hdKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGUoX3RoaXMuaW5kZXgsIGZyb21Ub3VjaCwgZmFsc2UsICdwcmV2Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5zLnNsaWRlRW5kQW5pbWF0b2luICYmICFmcm9tVG91Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLmFkZENsYXNzKCdsZy1sZWZ0LWVuZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy1sZWZ0LWVuZCcpO1xuICAgICAgICAgICAgICAgICAgICB9LCA0MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBQbHVnaW4ucHJvdG90eXBlLmtleVByZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLiRpdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ2tleXVwLmxnJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy4kaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ29Ub1ByZXZTbGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdrZXlkb3duLmxnJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnMuZXNjS2V5ID09PSB0cnVlICYmIGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy4kb3V0ZXIuaGFzQ2xhc3MoJ2xnLXRodW1iLW9wZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy10aHVtYi1vcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgUGx1Z2luLnByb3RvdHlwZS5hcnJvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLiRvdXRlci5maW5kKCcubGctcHJldicpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3RoaXMuZ29Ub1ByZXZTbGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiRvdXRlci5maW5kKCcubGctbmV4dCcpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3RoaXMuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgUGx1Z2luLnByb3RvdHlwZS5hcnJvd0Rpc2FibGUgPSBmdW5jdGlvbihpbmRleCkge1xuXG4gICAgICAgIC8vIERpc2FibGUgYXJyb3dzIGlmIHMuaGlkZUNvbnRyb2xPbkVuZCBpcyB0cnVlXG4gICAgICAgIGlmICghdGhpcy5zLmxvb3AgJiYgdGhpcy5zLmhpZGVDb250cm9sT25FbmQpIHtcbiAgICAgICAgICAgIGlmICgoaW5kZXggKyAxKSA8IHRoaXMuJHNsaWRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG91dGVyLmZpbmQoJy5sZy1uZXh0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kb3V0ZXIuZmluZCgnLmxnLW5leHQnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kb3V0ZXIuZmluZCgnLmxnLXByZXYnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRvdXRlci5maW5kKCcubGctcHJldicpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgUGx1Z2luLnByb3RvdHlwZS5zZXRUcmFuc2xhdGUgPSBmdW5jdGlvbigkZWwsIHhWYWx1ZSwgeVZhbHVlKSB7XG4gICAgICAgIC8vIGpRdWVyeSBzdXBwb3J0cyBBdXRvbWF0aWMgQ1NTIHByZWZpeGluZyBzaW5jZSBqUXVlcnkgMS44LjBcbiAgICAgICAgaWYgKHRoaXMucy51c2VMZWZ0KSB7XG4gICAgICAgICAgICAkZWwuY3NzKCdsZWZ0JywgeFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRlbC5jc3Moe1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyAoeFZhbHVlKSArICdweCwgJyArIHlWYWx1ZSArICdweCwgMHB4KSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFBsdWdpbi5wcm90b3R5cGUudG91Y2hNb3ZlID0gZnVuY3Rpb24oc3RhcnRDb29yZHMsIGVuZENvb3Jkcykge1xuXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGVuZENvb3JkcyAtIHN0YXJ0Q29vcmRzO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSkgPiAxNSkge1xuICAgICAgICAgICAgLy8gcmVzZXQgb3BhY2l0eSBhbmQgdHJhbnNpdGlvbiBkdXJhdGlvblxuICAgICAgICAgICAgdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLWRyYWdnaW5nJyk7XG5cbiAgICAgICAgICAgIC8vIG1vdmUgY3VycmVudCBzbGlkZVxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUodGhpcy4kc2xpZGUuZXEodGhpcy5pbmRleCksIGRpc3RhbmNlLCAwKTtcblxuICAgICAgICAgICAgLy8gbW92ZSBuZXh0IGFuZCBwcmV2IHNsaWRlIHdpdGggY3VycmVudCBzbGlkZVxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoJCgnLmxnLXByZXYtc2xpZGUnKSwgLXRoaXMuJHNsaWRlLmVxKHRoaXMuaW5kZXgpLndpZHRoKCkgKyBkaXN0YW5jZSwgMCk7XG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZSgkKCcubGctbmV4dC1zbGlkZScpLCB0aGlzLiRzbGlkZS5lcSh0aGlzLmluZGV4KS53aWR0aCgpICsgZGlzdGFuY2UsIDApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFBsdWdpbi5wcm90b3R5cGUudG91Y2hFbmQgPSBmdW5jdGlvbihkaXN0YW5jZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIGtlZXAgc2xpZGUgYW5pbWF0aW9uIGZvciBhbnkgbW9kZSB3aGlsZSBkcmFnZy9zd2lwZVxuICAgICAgICBpZiAoX3RoaXMucy5tb2RlICE9PSAnbGctc2xpZGUnKSB7XG4gICAgICAgICAgICBfdGhpcy4kb3V0ZXIuYWRkQ2xhc3MoJ2xnLXNsaWRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRzbGlkZS5ub3QoJy5sZy1jdXJyZW50LCAubGctcHJldi1zbGlkZSwgLmxnLW5leHQtc2xpZGUnKS5jc3MoJ29wYWNpdHknLCAnMCcpO1xuXG4gICAgICAgIC8vIHNldCB0cmFuc2l0aW9uIGR1cmF0aW9uXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy4kb3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWRyYWdnaW5nJyk7XG4gICAgICAgICAgICBpZiAoKGRpc3RhbmNlIDwgMCkgJiYgKE1hdGguYWJzKGRpc3RhbmNlKSA+IF90aGlzLnMuc3dpcGVUaHJlc2hvbGQpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ29Ub05leHRTbGlkZSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGRpc3RhbmNlID4gMCkgJiYgKE1hdGguYWJzKGRpc3RhbmNlKSA+IF90aGlzLnMuc3dpcGVUaHJlc2hvbGQpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ29Ub1ByZXZTbGlkZSh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoZGlzdGFuY2UpIDwgNSkge1xuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBjbGljayBpZiBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gNSBwaXhcbiAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25TbGlkZUNsaWNrLmxnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzLiRzbGlkZS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyByZW1vdmUgc2xpZGUgY2xhc3Mgb25jZSBkcmFnL3N3aXBlIGlzIGNvbXBsZXRlZCBpZiBtb2RlIGlzIG5vdCBzbGlkZVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy4kb3V0ZXIuaGFzQ2xhc3MoJ2xnLWRyYWdnaW5nJykgJiYgX3RoaXMucy5tb2RlICE9PSAnbGctc2xpZGUnKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy1zbGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBfdGhpcy5zLnNwZWVkICsgMTAwKTtcblxuICAgIH07XG5cbiAgICBQbHVnaW4ucHJvdG90eXBlLmVuYWJsZVN3aXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzdGFydENvb3JkcyA9IDA7XG4gICAgICAgIHZhciBlbmRDb29yZHMgPSAwO1xuICAgICAgICB2YXIgaXNNb3ZlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChfdGhpcy5zLmVuYWJsZVN3aXBlICYmIF90aGlzLmRvQ3NzKCkpIHtcblxuICAgICAgICAgICAgX3RoaXMuJHNsaWRlLm9uKCd0b3VjaHN0YXJ0LmxnJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJG91dGVyLmhhc0NsYXNzKCdsZy16b29tZWQnKSAmJiAhX3RoaXMubGdCdXN5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubWFuYWdlU3dpcGVDbGFzcygpO1xuICAgICAgICAgICAgICAgICAgICBzdGFydENvb3JkcyA9IGUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpcy4kc2xpZGUub24oJ3RvdWNobW92ZS5sZycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLiRvdXRlci5oYXNDbGFzcygnbGctem9vbWVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlbmRDb29yZHMgPSBlLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudG91Y2hNb3ZlKHN0YXJ0Q29vcmRzLCBlbmRDb29yZHMpO1xuICAgICAgICAgICAgICAgICAgICBpc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX3RoaXMuJHNsaWRlLm9uKCd0b3VjaGVuZC5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJG91dGVyLmhhc0NsYXNzKCdsZy16b29tZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudG91Y2hFbmQoZW5kQ29vcmRzIC0gc3RhcnRDb29yZHMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uU2xpZGVDbGljay5sZycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBQbHVnaW4ucHJvdG90eXBlLmVuYWJsZURyYWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXJ0Q29vcmRzID0gMDtcbiAgICAgICAgdmFyIGVuZENvb3JkcyA9IDA7XG4gICAgICAgIHZhciBpc0RyYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzTW92ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKF90aGlzLnMuZW5hYmxlRHJhZyAmJiBfdGhpcy5kb0NzcygpKSB7XG4gICAgICAgICAgICBfdGhpcy4kc2xpZGUub24oJ21vdXNlZG93bi5sZycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLiRvdXRlci5oYXNDbGFzcygnbGctem9vbWVkJykgJiYgIV90aGlzLmxnQnVzeSAmJiAhJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm1hbmFnZVN3aXBlQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDb29yZHMgPSBlLnBhZ2VYO1xuICAgICAgICAgICAgICAgICAgICBpc0RyYWdpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICoqIEZpeCBmb3Igd2Via2l0IGN1cnNvciBpc3N1ZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjY3MjNcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnNjcm9sbExlZnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnNjcm9sbExlZnQgLT0gMTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAqXG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG91dGVyLnJlbW92ZUNsYXNzKCdsZy1ncmFiJykuYWRkQ2xhc3MoJ2xnLWdyYWJiaW5nJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uRHJhZ3N0YXJ0LmxnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQod2luZG93KS5vbignbW91c2Vtb3ZlLmxnJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0RyYWdpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNNb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGVuZENvb3JkcyA9IGUucGFnZVg7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoTW92ZShzdGFydENvb3JkcywgZW5kQ29vcmRzKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ29uRHJhZ21vdmUubGcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdtb3VzZXVwLmxnJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc01vdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudG91Y2hFbmQoZW5kQ29vcmRzIC0gc3RhcnRDb29yZHMpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25EcmFnZW5kLmxnJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnbGctb2JqZWN0JykgfHwgJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2xnLXZpZGVvLXBsYXknKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25TbGlkZUNsaWNrLmxnJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBleGVjdXRpb24gb24gY2xpY2tcbiAgICAgICAgICAgICAgICBpZiAoaXNEcmFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRHJhZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWdyYWJiaW5nJykuYWRkQ2xhc3MoJ2xnLWdyYWInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfTtcblxuICAgIFBsdWdpbi5wcm90b3R5cGUubWFuYWdlU3dpcGVDbGFzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3RvdWNoTmV4dCA9IHRoaXMuaW5kZXggKyAxO1xuICAgICAgICB2YXIgX3RvdWNoUHJldiA9IHRoaXMuaW5kZXggLSAxO1xuICAgICAgICBpZiAodGhpcy5zLmxvb3AgJiYgdGhpcy4kc2xpZGUubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBfdG91Y2hQcmV2ID0gdGhpcy4kc2xpZGUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy4kc2xpZGUubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIF90b3VjaE5leHQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kc2xpZGUucmVtb3ZlQ2xhc3MoJ2xnLW5leHQtc2xpZGUgbGctcHJldi1zbGlkZScpO1xuICAgICAgICBpZiAoX3RvdWNoUHJldiA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLiRzbGlkZS5lcShfdG91Y2hQcmV2KS5hZGRDbGFzcygnbGctcHJldi1zbGlkZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kc2xpZGUuZXEoX3RvdWNoTmV4dCkuYWRkQ2xhc3MoJ2xnLW5leHQtc2xpZGUnKTtcbiAgICB9O1xuXG4gICAgUGx1Z2luLnByb3RvdHlwZS5tb3VzZXdoZWVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF90aGlzLiRvdXRlci5vbignbW91c2V3aGVlbC5sZycsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgaWYgKCFlLmRlbHRhWSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmdvVG9QcmV2U2xpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIFBsdWdpbi5wcm90b3R5cGUuY2xvc2VHYWxsZXJ5ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG1vdXNlZG93biA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRvdXRlci5maW5kKCcubGctY2xvc2UnKS5vbignY2xpY2subGcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKF90aGlzLnMuY2xvc2FibGUpIHtcblxuICAgICAgICAgICAgLy8gSWYgeW91IGRyYWcgdGhlIHNsaWRlIGFuZCByZWxlYXNlIG91dHNpZGUgZ2FsbGVyeSBnZXRzIGNsb3NlIG9uIGNocm9tZVxuICAgICAgICAgICAgLy8gZm9yIHByZXZlbnRpbmcgdGhpcyBjaGVjayBtb3VzZWRvd24gYW5kIG1vdXNldXAgaGFwcGVuZWQgb24gLmxnLWl0ZW0gb3IgbGctb3V0ZXJcbiAgICAgICAgICAgIF90aGlzLiRvdXRlci5vbignbW91c2Vkb3duLmxnJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCcubGctb3V0ZXInKSB8fCAkKGUudGFyZ2V0KS5pcygnLmxnLWl0ZW0gJykgfHwgJChlLnRhcmdldCkuaXMoJy5sZy1pbWctd3JhcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgX3RoaXMuJG91dGVyLm9uKCdtb3VzZW1vdmUubGcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBtb3VzZWRvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpcy4kb3V0ZXIub24oJ21vdXNldXAubGcnLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoJChlLnRhcmdldCkuaXMoJy5sZy1vdXRlcicpIHx8ICQoZS50YXJnZXQpLmlzKCcubGctaXRlbSAnKSB8fCAkKGUudGFyZ2V0KS5pcygnLmxnLWltZy13cmFwJykgJiYgbW91c2Vkb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJG91dGVyLmhhc0NsYXNzKCdsZy1kcmFnZ2luZycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBQbHVnaW4ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkKSB7XG5cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBpZiAoIWQpIHtcbiAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdvbkJlZm9yZUNsb3NlLmxnJyk7XG4gICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKF90aGlzLnByZXZTY3JvbGxUb3ApO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogaWYgZCBpcyBmYWxzZSBvciB1bmRlZmluZWQgZGVzdHJveSB3aWxsIG9ubHkgY2xvc2UgdGhlIGdhbGxlcnlcbiAgICAgICAgICogcGx1Z2lucyBpbnN0YW5jZSByZW1haW5zIHdpdGggdGhlIGVsZW1lbnRcbiAgICAgICAgICpcbiAgICAgICAgICogaWYgZCBpcyB0cnVlIGRlc3Ryb3kgd2lsbCBjb21wbGV0ZWx5IHJlbW92ZSB0aGUgcGx1Z2luXG4gICAgICAgICAqL1xuXG4gICAgICAgIGlmIChkKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLnMuZHluYW1pYykge1xuICAgICAgICAgICAgICAgIC8vIG9ubHkgd2hlbiBub3QgdXNpbmcgZHluYW1pYyBtb2RlIGlzICRpdGVtcyBhIGpxdWVyeSBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMub2ZmKCdjbGljay5sZyBjbGljay5sZ2N1c3RvbScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLnJlbW92ZURhdGEoX3RoaXMuZWwsICdsaWdodEdhbGxlcnknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVuYmluZCBhbGwgZXZlbnRzIGFkZGVkIGJ5IGxpZ2h0R2FsbGVyeVxuICAgICAgICB0aGlzLiRlbC5vZmYoJy5sZy50bScpO1xuXG4gICAgICAgIC8vIERpc3Ryb3kgYWxsIGxpZ2h0R2FsbGVyeSBtb2R1bGVzXG4gICAgICAgICQuZWFjaCgkLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzLCBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5tb2R1bGVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tb2R1bGVzW2tleV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmxHYWxsZXJ5T24gPSBmYWxzZTtcblxuICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuaGlkZUJhcnRpbWVvdXQpO1xuICAgICAgICB0aGlzLmhpZGVCYXJ0aW1lb3V0ID0gZmFsc2U7XG4gICAgICAgICQod2luZG93KS5vZmYoJy5sZycpO1xuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xnLW9uIGxnLWZyb20taGFzaCcpO1xuXG4gICAgICAgIGlmIChfdGhpcy4kb3V0ZXIpIHtcbiAgICAgICAgICAgIF90aGlzLiRvdXRlci5yZW1vdmVDbGFzcygnbGctdmlzaWJsZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmxnLWJhY2tkcm9wJykucmVtb3ZlQ2xhc3MoJ2luJyk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy4kb3V0ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kb3V0ZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoJy5sZy1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBpZiAoIWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignb25DbG9zZUFmdGVyLmxnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgX3RoaXMucy5iYWNrZHJvcER1cmF0aW9uICsgNTApO1xuICAgIH07XG5cbiAgICAkLmZuLmxpZ2h0R2FsbGVyeSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghJC5kYXRhKHRoaXMsICdsaWdodEdhbGxlcnknKSkge1xuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLCAnbGlnaHRHYWxsZXJ5JywgbmV3IFBsdWdpbih0aGlzLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YSgnbGlnaHRHYWxsZXJ5JykuaW5pdCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdsaWdodEdhbGxlcnkgaGFzIG5vdCBpbml0aWF0ZWQgcHJvcGVybHknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkLmZuLmxpZ2h0R2FsbGVyeS5tb2R1bGVzID0ge307XG5cbn0pKCk7XG5cblxufSkpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBLFdBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/lightgallery/dist/js/lightgallery.js\n");

/***/ }),

/***/ "../../node_modules/lightgallery/modules/lg-fullscreen.js":
/*!******************************************************************************!*\
  !*** /home/ops/work/teya/node_modules/lightgallery/modules/lg-fullscreen.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! lg-fullscreen - v1.0.1 - 2016-09-30\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2016 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (true) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"../../node_modules/jquery/dist/jquery.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {\n      return (factory(a0));\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(this, function ($) {\n\n(function() {\n\n    'use strict';\n\n    var defaults = {\n        fullScreen: true\n    };\n\n    var Fullscreen = function(element) {\n\n        // get lightGallery core plugin data\n        this.core = $(element).data('lightGallery');\n\n        this.$el = $(element);\n\n        // extend module defalut settings with lightGallery core settings\n        this.core.s = $.extend({}, defaults, this.core.s);\n\n        this.init();\n\n        return this;\n    };\n\n    Fullscreen.prototype.init = function() {\n        var fullScreen = '';\n        if (this.core.s.fullScreen) {\n\n            // check for fullscreen browser support\n            if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled &&\n                !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n                return;\n            } else {\n                fullScreen = '<span class=\"lg-fullscreen lg-icon\"></span>';\n                this.core.$outer.find('.lg-toolbar').append(fullScreen);\n                this.fullScreen();\n            }\n        }\n    };\n\n    Fullscreen.prototype.requestFullscreen = function() {\n        var el = document.documentElement;\n        if (el.requestFullscreen) {\n            el.requestFullscreen();\n        } else if (el.msRequestFullscreen) {\n            el.msRequestFullscreen();\n        } else if (el.mozRequestFullScreen) {\n            el.mozRequestFullScreen();\n        } else if (el.webkitRequestFullscreen) {\n            el.webkitRequestFullscreen();\n        }\n    };\n\n    Fullscreen.prototype.exitFullscreen = function() {\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n            document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n            document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n            document.webkitExitFullscreen();\n        }\n    };\n\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode\n    Fullscreen.prototype.fullScreen = function() {\n        var _this = this;\n\n        $(document).on('fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg', function() {\n            _this.core.$outer.toggleClass('lg-fullscreen-on');\n        });\n\n        this.core.$outer.find('.lg-fullscreen').on('click.lg', function() {\n            if (!document.fullscreenElement &&\n                !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n                _this.requestFullscreen();\n            } else {\n                _this.exitFullscreen();\n            }\n        });\n\n    };\n\n    Fullscreen.prototype.destroy = function() {\n\n        // exit from fullscreen if activated\n        this.exitFullscreen();\n\n        $(document).off('fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg');\n    };\n\n    $.fn.lightGallery.modules.fullscreen = Fullscreen;\n\n})();\n\n}));\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9tb2R1bGVzL2xnLWZ1bGxzY3JlZW4uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL2hvbWUvb3BzL3dvcmsvdGV5YS9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L21vZHVsZXMvbGctZnVsbHNjcmVlbi5qcz9hZDI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qISBsZy1mdWxsc2NyZWVuIC0gdjEuMC4xIC0gMjAxNi0wOS0zMFxuKiBodHRwOi8vc2FjaGluY2hvb2x1ci5naXRodWIuaW8vbGlnaHRHYWxsZXJ5XG4qIENvcHlyaWdodCAoYykgMjAxNiBTYWNoaW4gTjsgTGljZW5zZWQgR1BMdjMgKi9cblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldFxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmdW5jdGlvbiAoYTApIHtcbiAgICAgIHJldHVybiAoZmFjdG9yeShhMCkpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgIC8vIGxpa2UgTm9kZS5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuICB9IGVsc2Uge1xuICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoJCkge1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIGZ1bGxTY3JlZW46IHRydWVcbiAgICB9O1xuXG4gICAgdmFyIEZ1bGxzY3JlZW4gPSBmdW5jdGlvbihlbGVtZW50KSB7XG5cbiAgICAgICAgLy8gZ2V0IGxpZ2h0R2FsbGVyeSBjb3JlIHBsdWdpbiBkYXRhXG4gICAgICAgIHRoaXMuY29yZSA9ICQoZWxlbWVudCkuZGF0YSgnbGlnaHRHYWxsZXJ5Jyk7XG5cbiAgICAgICAgdGhpcy4kZWwgPSAkKGVsZW1lbnQpO1xuXG4gICAgICAgIC8vIGV4dGVuZCBtb2R1bGUgZGVmYWx1dCBzZXR0aW5ncyB3aXRoIGxpZ2h0R2FsbGVyeSBjb3JlIHNldHRpbmdzXG4gICAgICAgIHRoaXMuY29yZS5zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCB0aGlzLmNvcmUucyk7XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEZ1bGxzY3JlZW4ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZ1bGxTY3JlZW4gPSAnJztcbiAgICAgICAgaWYgKHRoaXMuY29yZS5zLmZ1bGxTY3JlZW4pIHtcblxuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGZ1bGxzY3JlZW4gYnJvd3NlciBzdXBwb3J0XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkICYmICFkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZCAmJiAhZG9jdW1lbnQubXNGdWxsc2NyZWVuRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZnVsbFNjcmVlbiA9ICc8c3BhbiBjbGFzcz1cImxnLWZ1bGxzY3JlZW4gbGctaWNvblwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHRoaXMuY29yZS4kb3V0ZXIuZmluZCgnLmxnLXRvb2xiYXInKS5hcHBlbmQoZnVsbFNjcmVlbik7XG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsU2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRnVsbHNjcmVlbi5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICBpZiAoZWwucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgIGVsLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWwubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgZWwubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsLm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XG4gICAgICAgICAgICBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBlbC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEZ1bGxzY3JlZW4ucHJvdG90eXBlLmV4aXRGdWxsc2NyZWVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0FQSS9ET00vVXNpbmdfZnVsbF9zY3JlZW5fbW9kZVxuICAgIEZ1bGxzY3JlZW4ucHJvdG90eXBlLmZ1bGxTY3JlZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignZnVsbHNjcmVlbmNoYW5nZS5sZyB3ZWJraXRmdWxsc2NyZWVuY2hhbmdlLmxnIG1vemZ1bGxzY3JlZW5jaGFuZ2UubGcgTVNGdWxsc2NyZWVuQ2hhbmdlLmxnJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5jb3JlLiRvdXRlci50b2dnbGVDbGFzcygnbGctZnVsbHNjcmVlbi1vbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvcmUuJG91dGVyLmZpbmQoJy5sZy1mdWxsc2NyZWVuJykub24oJ2NsaWNrLmxnJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgIWRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50ICYmICFkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAmJiAhZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIEZ1bGxzY3JlZW4ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAvLyBleGl0IGZyb20gZnVsbHNjcmVlbiBpZiBhY3RpdmF0ZWRcbiAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignZnVsbHNjcmVlbmNoYW5nZS5sZyB3ZWJraXRmdWxsc2NyZWVuY2hhbmdlLmxnIG1vemZ1bGxzY3JlZW5jaGFuZ2UubGcgTVNGdWxsc2NyZWVuQ2hhbmdlLmxnJyk7XG4gICAgfTtcblxuICAgICQuZm4ubGlnaHRHYWxsZXJ5Lm1vZHVsZXMuZnVsbHNjcmVlbiA9IEZ1bGxzY3JlZW47XG5cbn0pKCk7XG5cbn0pKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBLFdBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/lightgallery/modules/lg-fullscreen.js\n");

/***/ }),

/***/ "../../node_modules/lightgallery/modules/lg-video.js":
/*!*************************************************************************!*\
  !*** /home/ops/work/teya/node_modules/lightgallery/modules/lg-video.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! lg-video - v1.2.2 - 2018-05-01\n* http://sachinchoolur.github.io/lightGallery\n* Copyright (c) 2018 Sachin N; Licensed GPLv3 */\n\n(function (root, factory) {\n  if (true) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"../../node_modules/jquery/dist/jquery.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function (a0) {\n      return (factory(a0));\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(this, function ($) {\n\n(function() {\n    \n        'use strict';\n    \n        var defaults = {\n            videoMaxWidth: '855px',\n\n            autoplayFirstVideo: true,\n\n            youtubePlayerParams: false,\n            vimeoPlayerParams: false,\n            dailymotionPlayerParams: false,\n            vkPlayerParams: false,\n\n            videojs: false,\n            videojsOptions: {}\n        };\n    \n        var Video = function(element) {\n    \n            this.core = $(element).data('lightGallery');\n    \n            this.$el = $(element);\n            this.core.s = $.extend({}, defaults, this.core.s);\n            this.videoLoaded = false;\n    \n            this.init();\n    \n            return this;\n        };\n    \n        Video.prototype.init = function() {\n            var _this = this;\n    \n            // Event triggered when video url found without poster\n            _this.core.$el.on('hasVideo.lg.tm', onHasVideo.bind(this));\n    \n            // Set max width for video\n            _this.core.$el.on('onAferAppendSlide.lg.tm', onAferAppendSlide.bind(this));\n    \n            if (_this.core.doCss() && (_this.core.$items.length > 1) && (_this.core.s.enableSwipe || _this.core.s.enableDrag)) {\n                _this.core.$el.on('onSlideClick.lg.tm', function() {\n                    var $el = _this.core.$slide.eq(_this.core.index);\n                    _this.loadVideoOnclick($el);\n                });\n            } else {\n    \n                // For IE 9 and bellow\n                _this.core.$slide.on('click.lg', function() {\n                    _this.loadVideoOnclick($(this));\n                });\n            }\n    \n            _this.core.$el.on('onBeforeSlide.lg.tm', onBeforeSlide.bind(this));\n    \n            _this.core.$el.on('onAfterSlide.lg.tm', function(event, prevIndex) {\n                _this.core.$slide.eq(prevIndex).removeClass('lg-video-playing');\n            });\n            \n            if (_this.core.s.autoplayFirstVideo) {\n                _this.core.$el.on('onAferAppendSlide.lg.tm', function (e, index) {\n                    if (!_this.core.lGalleryOn) {\n                        var $el = _this.core.$slide.eq(index);\n                        setTimeout(function () {\n                            _this.loadVideoOnclick($el);\n                        }, 100);\n                    }\n                });\n            }\n        };\n    \n        Video.prototype.loadVideo = function(src, addClass, noPoster, index, html) {\n            var video = '';\n            var autoplay = 1;\n            var a = '';\n            var isVideo = this.core.isVideo(src, index) || {};\n    \n            // Enable autoplay based on setting for first video if poster doesn't exist\n            if (noPoster) {\n                if (this.videoLoaded) {\n                    autoplay = 0;\n                } else {\n                    autoplay = this.core.s.autoplayFirstVideo ? 1 : 0;\n                }\n            }\n    \n            if (isVideo.youtube) {\n    \n                a = '?wmode=opaque&autoplay=' + autoplay + '&enablejsapi=1';\n                if (this.core.s.youtubePlayerParams) {\n                    a = a + '&' + $.param(this.core.s.youtubePlayerParams);\n                }\n    \n                video = '<iframe class=\"lg-video-object lg-youtube ' + addClass + '\" width=\"560\" height=\"315\" src=\"//www.youtube.com/embed/' + isVideo.youtube[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n    \n            } else if (isVideo.vimeo) {\n    \n                a = '?autoplay=' + autoplay + '&api=1';\n                if (this.core.s.vimeoPlayerParams) {\n                    a = a + '&' + $.param(this.core.s.vimeoPlayerParams);\n                }\n    \n                video = '<iframe class=\"lg-video-object lg-vimeo ' + addClass + '\" width=\"560\" height=\"315\"  src=\"//player.vimeo.com/video/' + isVideo.vimeo[1] + a + '\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';\n    \n            } else if (isVideo.dailymotion) {\n    \n                a = '?wmode=opaque&autoplay=' + autoplay + '&api=postMessage';\n                if (this.core.s.dailymotionPlayerParams) {\n                    a = a + '&' + $.param(this.core.s.dailymotionPlayerParams);\n                }\n    \n                video = '<iframe class=\"lg-video-object lg-dailymotion ' + addClass + '\" width=\"560\" height=\"315\" src=\"//www.dailymotion.com/embed/video/' + isVideo.dailymotion[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n    \n            } else if (isVideo.html5) {\n                var fL = html.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    html = $(html).html();\n                }\n    \n                video = html;\n    \n            } else if (isVideo.vk) {\n    \n                a = '&autoplay=' + autoplay;\n                if (this.core.s.vkPlayerParams) {\n                    a = a + '&' + $.param(this.core.s.vkPlayerParams);\n                }\n    \n                video = '<iframe class=\"lg-video-object lg-vk ' + addClass + '\" width=\"560\" height=\"315\" src=\"//vk.com/video_ext.php?' + isVideo.vk[1] + a + '\" frameborder=\"0\" allowfullscreen></iframe>';\n    \n            }\n    \n            return video;\n        };\n\n        Video.prototype.loadVideoOnclick = function($el){\n\n            var _this = this;\n            // check slide has poster\n            if ($el.find('.lg-object').hasClass('lg-has-poster') && $el.find('.lg-object').is(':visible')) {\n\n                // check already video element present\n                if (!$el.hasClass('lg-has-video')) {\n\n                    $el.addClass('lg-video-playing lg-has-video');\n\n                    var _src;\n                    var _html;\n                    var _loadVideo = function(_src, _html) {\n\n                        $el.find('.lg-video').append(_this.loadVideo(_src, '', false, _this.core.index, _html));\n\n                        if (_html) {\n                            if (_this.core.s.videojs) {\n                                try {\n                                    videojs(_this.core.$slide.eq(_this.core.index).find('.lg-html5').get(0), _this.core.s.videojsOptions, function() {\n                                        this.play();\n                                    });\n                                } catch (e) {\n                                    console.error('Make sure you have included videojs');\n                                }\n                            } else {\n                                _this.core.$slide.eq(_this.core.index).find('.lg-html5').get(0).play();\n                            }\n                        }\n\n                    };\n\n                    if (_this.core.s.dynamic) {\n\n                        _src = _this.core.s.dynamicEl[_this.core.index].src;\n                        _html = _this.core.s.dynamicEl[_this.core.index].html;\n\n                        _loadVideo(_src, _html);\n\n                    } else {\n\n                        _src = _this.core.$items.eq(_this.core.index).attr('href') || _this.core.$items.eq(_this.core.index).attr('data-src');\n                        _html = _this.core.$items.eq(_this.core.index).attr('data-html');\n\n                        _loadVideo(_src, _html);\n\n                    }\n\n                    var $tempImg = $el.find('.lg-object');\n                    $el.find('.lg-video').append($tempImg);\n\n                    // @todo loading icon for html5 videos also\n                    // for showing the loading indicator while loading video\n                    if (!$el.find('.lg-video-object').hasClass('lg-html5')) {\n                        $el.removeClass('lg-complete');\n                        $el.find('.lg-video-object').on('load.lg error.lg', function() {\n                            $el.addClass('lg-complete');\n                        });\n                    }\n\n                } else {\n\n                    var youtubePlayer = $el.find('.lg-youtube').get(0);\n                    var vimeoPlayer = $el.find('.lg-vimeo').get(0);\n                    var dailymotionPlayer = $el.find('.lg-dailymotion').get(0);\n                    var html5Player = $el.find('.lg-html5').get(0);\n                    if (youtubePlayer) {\n                        youtubePlayer.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*');\n                    } else if (vimeoPlayer) {\n                        try {\n                            $f(vimeoPlayer).api('play');\n                        } catch (e) {\n                            console.error('Make sure you have included froogaloop2 js');\n                        }\n                    } else if (dailymotionPlayer) {\n                        dailymotionPlayer.contentWindow.postMessage('play', '*');\n\n                    } else if (html5Player) {\n                        if (_this.core.s.videojs) {\n                            try {\n                                videojs(html5Player).play();\n                            } catch (e) {\n                                console.error('Make sure you have included videojs');\n                            }\n                        } else {\n                            html5Player.play();\n                        }\n                    }\n\n                    $el.addClass('lg-video-playing');\n\n                }\n            }\n        };\n    \n        Video.prototype.destroy = function() {\n            this.videoLoaded = false;\n        };\n\n        function onHasVideo(event, index, src, html) {\n            /*jshint validthis:true */\n            var _this = this;\n            _this.core.$slide.eq(index).find('.lg-video').append(_this.loadVideo(src, 'lg-object', true, index, html));\n            if (html) {\n                if (_this.core.s.videojs) {\n                    try {\n                        videojs(_this.core.$slide.eq(index).find('.lg-html5').get(0), _this.core.s.videojsOptions, function() {\n                            if (!_this.videoLoaded && _this.core.s.autoplayFirstVideo) {\n                                this.play();\n                            }\n                        });\n                    } catch (e) {\n                        console.error('Make sure you have included videojs');\n                    }\n                } else {\n                    if(!_this.videoLoaded && _this.core.s.autoplayFirstVideo) {\n                        _this.core.$slide.eq(index).find('.lg-html5').get(0).play();\n                    }\n                }\n            }\n        }\n\n        function onAferAppendSlide(event, index) {\n            /*jshint validthis:true */\n            var $videoCont = this.core.$slide.eq(index).find('.lg-video-cont');\n            if (!$videoCont.hasClass('lg-has-iframe')) {\n                $videoCont.css('max-width', this.core.s.videoMaxWidth);\n                this.videoLoaded = true;\n            }\n        }\n\n        function onBeforeSlide(event, prevIndex, index) {\n            /*jshint validthis:true */\n            var _this = this;\n\n            var $videoSlide = _this.core.$slide.eq(prevIndex);\n            var youtubePlayer = $videoSlide.find('.lg-youtube').get(0);\n            var vimeoPlayer = $videoSlide.find('.lg-vimeo').get(0);\n            var dailymotionPlayer = $videoSlide.find('.lg-dailymotion').get(0);\n            var vkPlayer = $videoSlide.find('.lg-vk').get(0);\n            var html5Player = $videoSlide.find('.lg-html5').get(0);\n            if (youtubePlayer) {\n                youtubePlayer.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*');\n            } else if (vimeoPlayer) {\n                try {\n                    $f(vimeoPlayer).api('pause');\n                } catch (e) {\n                    console.error('Make sure you have included froogaloop2 js');\n                }\n            } else if (dailymotionPlayer) {\n                dailymotionPlayer.contentWindow.postMessage('pause', '*');\n\n            } else if (html5Player) {\n                if (_this.core.s.videojs) {\n                    try {\n                        videojs(html5Player).pause();\n                    } catch (e) {\n                        console.error('Make sure you have included videojs');\n                    }\n                } else {\n                    html5Player.pause();\n                }\n            } if (vkPlayer) {\n                $(vkPlayer).attr('src', $(vkPlayer).attr('src').replace('&autoplay', '&noplay'));\n            }\n\n            var _src;\n            if (_this.core.s.dynamic) {\n                _src = _this.core.s.dynamicEl[index].src;\n            } else {\n                _src = _this.core.$items.eq(index).attr('href') || _this.core.$items.eq(index).attr('data-src');\n\n            }\n\n            var _isVideo = _this.core.isVideo(_src, index) || {};\n            if (_isVideo.youtube || _isVideo.vimeo || _isVideo.dailymotion || _isVideo.vk) {\n                _this.core.$outer.addClass('lg-hide-download');\n            }\n\n        }\n    \n        $.fn.lightGallery.modules.video = Video;\n    \n    })();\n\n}));\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9tb2R1bGVzL2xnLXZpZGVvLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9ob21lL29wcy93b3JrL3RleWEvbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9tb2R1bGVzL2xnLXZpZGVvLmpzPzYzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIGxnLXZpZGVvIC0gdjEuMi4yIC0gMjAxOC0wNS0wMVxuKiBodHRwOi8vc2FjaGluY2hvb2x1ci5naXRodWIuaW8vbGlnaHRHYWxsZXJ5XG4qIENvcHlyaWdodCAoYykgMjAxOCBTYWNoaW4gTjsgTGljZW5zZWQgR1BMdjMgKi9cblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldFxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmdW5jdGlvbiAoYTApIHtcbiAgICAgIHJldHVybiAoZmFjdG9yeShhMCkpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShyb290W1wialF1ZXJ5XCJdKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoJCkge1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgdmlkZW9NYXhXaWR0aDogJzg1NXB4JyxcblxuICAgICAgICAgICAgYXV0b3BsYXlGaXJzdFZpZGVvOiB0cnVlLFxuXG4gICAgICAgICAgICB5b3V0dWJlUGxheWVyUGFyYW1zOiBmYWxzZSxcbiAgICAgICAgICAgIHZpbWVvUGxheWVyUGFyYW1zOiBmYWxzZSxcbiAgICAgICAgICAgIGRhaWx5bW90aW9uUGxheWVyUGFyYW1zOiBmYWxzZSxcbiAgICAgICAgICAgIHZrUGxheWVyUGFyYW1zOiBmYWxzZSxcblxuICAgICAgICAgICAgdmlkZW9qczogZmFsc2UsXG4gICAgICAgICAgICB2aWRlb2pzT3B0aW9uczoge31cbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgdmFyIFZpZGVvID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIFxuICAgICAgICAgICAgdGhpcy5jb3JlID0gJChlbGVtZW50KS5kYXRhKCdsaWdodEdhbGxlcnknKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuJGVsID0gJChlbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuY29yZS5zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCB0aGlzLmNvcmUucyk7XG4gICAgICAgICAgICB0aGlzLnZpZGVvTG9hZGVkID0gZmFsc2U7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICBWaWRlby5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBcbiAgICAgICAgICAgIC8vIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHZpZGVvIHVybCBmb3VuZCB3aXRob3V0IHBvc3RlclxuICAgICAgICAgICAgX3RoaXMuY29yZS4kZWwub24oJ2hhc1ZpZGVvLmxnLnRtJywgb25IYXNWaWRlby5iaW5kKHRoaXMpKTtcbiAgICBcbiAgICAgICAgICAgIC8vIFNldCBtYXggd2lkdGggZm9yIHZpZGVvXG4gICAgICAgICAgICBfdGhpcy5jb3JlLiRlbC5vbignb25BZmVyQXBwZW5kU2xpZGUubGcudG0nLCBvbkFmZXJBcHBlbmRTbGlkZS5iaW5kKHRoaXMpKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChfdGhpcy5jb3JlLmRvQ3NzKCkgJiYgKF90aGlzLmNvcmUuJGl0ZW1zLmxlbmd0aCA+IDEpICYmIChfdGhpcy5jb3JlLnMuZW5hYmxlU3dpcGUgfHwgX3RoaXMuY29yZS5zLmVuYWJsZURyYWcpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS4kZWwub24oJ29uU2xpZGVDbGljay5sZy50bScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGVsID0gX3RoaXMuY29yZS4kc2xpZGUuZXEoX3RoaXMuY29yZS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRWaWRlb09uY2xpY2soJGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIElFIDkgYW5kIGJlbGxvd1xuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUuJHNsaWRlLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkVmlkZW9PbmNsaWNrKCQodGhpcykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgX3RoaXMuY29yZS4kZWwub24oJ29uQmVmb3JlU2xpZGUubGcudG0nLCBvbkJlZm9yZVNsaWRlLmJpbmQodGhpcykpO1xuICAgIFxuICAgICAgICAgICAgX3RoaXMuY29yZS4kZWwub24oJ29uQWZ0ZXJTbGlkZS5sZy50bScsIGZ1bmN0aW9uKGV2ZW50LCBwcmV2SW5kZXgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLiRzbGlkZS5lcShwcmV2SW5kZXgpLnJlbW92ZUNsYXNzKCdsZy12aWRlby1wbGF5aW5nJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKF90aGlzLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLiRlbC5vbignb25BZmVyQXBwZW5kU2xpZGUubGcudG0nLCBmdW5jdGlvbiAoZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5jb3JlLmxHYWxsZXJ5T24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZWwgPSBfdGhpcy5jb3JlLiRzbGlkZS5lcShpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkVmlkZW9PbmNsaWNrKCRlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIFZpZGVvLnByb3RvdHlwZS5sb2FkVmlkZW8gPSBmdW5jdGlvbihzcmMsIGFkZENsYXNzLCBub1Bvc3RlciwgaW5kZXgsIGh0bWwpIHtcbiAgICAgICAgICAgIHZhciB2aWRlbyA9ICcnO1xuICAgICAgICAgICAgdmFyIGF1dG9wbGF5ID0gMTtcbiAgICAgICAgICAgIHZhciBhID0gJyc7XG4gICAgICAgICAgICB2YXIgaXNWaWRlbyA9IHRoaXMuY29yZS5pc1ZpZGVvKHNyYywgaW5kZXgpIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgLy8gRW5hYmxlIGF1dG9wbGF5IGJhc2VkIG9uIHNldHRpbmcgZm9yIGZpcnN0IHZpZGVvIGlmIHBvc3RlciBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICBpZiAobm9Qb3N0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlb0xvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheSA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXkgPSB0aGlzLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8gPyAxIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoaXNWaWRlby55b3V0dWJlKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgYSA9ICc/d21vZGU9b3BhcXVlJmF1dG9wbGF5PScgKyBhdXRvcGxheSArICcmZW5hYmxlanNhcGk9MSc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29yZS5zLnlvdXR1YmVQbGF5ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGEgKyAnJicgKyAkLnBhcmFtKHRoaXMuY29yZS5zLnlvdXR1YmVQbGF5ZXJQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2aWRlbyA9ICc8aWZyYW1lIGNsYXNzPVwibGctdmlkZW8tb2JqZWN0IGxnLXlvdXR1YmUgJyArIGFkZENsYXNzICsgJ1wiIHdpZHRoPVwiNTYwXCIgaGVpZ2h0PVwiMzE1XCIgc3JjPVwiLy93d3cueW91dHViZS5jb20vZW1iZWQvJyArIGlzVmlkZW8ueW91dHViZVsxXSArIGEgKyAnXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic7XG4gICAgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzVmlkZW8udmltZW8pIHtcbiAgICBcbiAgICAgICAgICAgICAgICBhID0gJz9hdXRvcGxheT0nICsgYXV0b3BsYXkgKyAnJmFwaT0xJztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb3JlLnMudmltZW9QbGF5ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGEgKyAnJicgKyAkLnBhcmFtKHRoaXMuY29yZS5zLnZpbWVvUGxheWVyUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmlkZW8gPSAnPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy12aW1lbyAnICsgYWRkQ2xhc3MgKyAnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiAgc3JjPVwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLycgKyBpc1ZpZGVvLnZpbWVvWzFdICsgYSArICdcIiBmcmFtZWJvcmRlcj1cIjBcIiB3ZWJraXRBbGxvd0Z1bGxTY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93RnVsbFNjcmVlbj48L2lmcmFtZT4nO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1ZpZGVvLmRhaWx5bW90aW9uKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgYSA9ICc/d21vZGU9b3BhcXVlJmF1dG9wbGF5PScgKyBhdXRvcGxheSArICcmYXBpPXBvc3RNZXNzYWdlJztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb3JlLnMuZGFpbHltb3Rpb25QbGF5ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGEgKyAnJicgKyAkLnBhcmFtKHRoaXMuY29yZS5zLmRhaWx5bW90aW9uUGxheWVyUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmlkZW8gPSAnPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy1kYWlseW1vdGlvbiAnICsgYWRkQ2xhc3MgKyAnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCIvL3d3dy5kYWlseW1vdGlvbi5jb20vZW1iZWQvdmlkZW8vJyArIGlzVmlkZW8uZGFpbHltb3Rpb25bMV0gKyBhICsgJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nO1xuICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1ZpZGVvLmh0bWw1KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZMID0gaHRtbC5zdWJzdHJpbmcoMCwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGZMID09PSAnLicgfHwgZkwgPT09ICcjJykge1xuICAgICAgICAgICAgICAgICAgICBodG1sID0gJChodG1sKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHZpZGVvID0gaHRtbDtcbiAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNWaWRlby52aykge1xuICAgIFxuICAgICAgICAgICAgICAgIGEgPSAnJmF1dG9wbGF5PScgKyBhdXRvcGxheTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb3JlLnMudmtQbGF5ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYSA9IGEgKyAnJicgKyAkLnBhcmFtKHRoaXMuY29yZS5zLnZrUGxheWVyUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdmlkZW8gPSAnPGlmcmFtZSBjbGFzcz1cImxnLXZpZGVvLW9iamVjdCBsZy12ayAnICsgYWRkQ2xhc3MgKyAnXCIgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCIvL3ZrLmNvbS92aWRlb19leHQucGhwPycgKyBpc1ZpZGVvLnZrWzFdICsgYSArICdcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztcbiAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB2aWRlbztcbiAgICAgICAgfTtcblxuICAgICAgICBWaWRlby5wcm90b3R5cGUubG9hZFZpZGVvT25jbGljayA9IGZ1bmN0aW9uKCRlbCl7XG5cbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAvLyBjaGVjayBzbGlkZSBoYXMgcG9zdGVyXG4gICAgICAgICAgICBpZiAoJGVsLmZpbmQoJy5sZy1vYmplY3QnKS5oYXNDbGFzcygnbGctaGFzLXBvc3RlcicpICYmICRlbC5maW5kKCcubGctb2JqZWN0JykuaXMoJzp2aXNpYmxlJykpIHtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGFscmVhZHkgdmlkZW8gZWxlbWVudCBwcmVzZW50XG4gICAgICAgICAgICAgICAgaWYgKCEkZWwuaGFzQ2xhc3MoJ2xnLWhhcy12aWRlbycpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgJGVsLmFkZENsYXNzKCdsZy12aWRlby1wbGF5aW5nIGxnLWhhcy12aWRlbycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBfc3JjO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2h0bWw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfbG9hZFZpZGVvID0gZnVuY3Rpb24oX3NyYywgX2h0bWwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsLmZpbmQoJy5sZy12aWRlbycpLmFwcGVuZChfdGhpcy5sb2FkVmlkZW8oX3NyYywgJycsIGZhbHNlLCBfdGhpcy5jb3JlLmluZGV4LCBfaHRtbCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2h0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5zLnZpZGVvanMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvanMoX3RoaXMuY29yZS4kc2xpZGUuZXEoX3RoaXMuY29yZS5pbmRleCkuZmluZCgnLmxnLWh0bWw1JykuZ2V0KDApLCBfdGhpcy5jb3JlLnMudmlkZW9qc09wdGlvbnMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCB2aWRlb2pzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLiRzbGlkZS5lcShfdGhpcy5jb3JlLmluZGV4KS5maW5kKCcubGctaHRtbDUnKS5nZXQoMCkucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb3JlLnMuZHluYW1pYykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfc3JjID0gX3RoaXMuY29yZS5zLmR5bmFtaWNFbFtfdGhpcy5jb3JlLmluZGV4XS5zcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaHRtbCA9IF90aGlzLmNvcmUucy5keW5hbWljRWxbX3RoaXMuY29yZS5pbmRleF0uaHRtbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRWaWRlbyhfc3JjLCBfaHRtbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3NyYyA9IF90aGlzLmNvcmUuJGl0ZW1zLmVxKF90aGlzLmNvcmUuaW5kZXgpLmF0dHIoJ2hyZWYnKSB8fCBfdGhpcy5jb3JlLiRpdGVtcy5lcShfdGhpcy5jb3JlLmluZGV4KS5hdHRyKCdkYXRhLXNyYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2h0bWwgPSBfdGhpcy5jb3JlLiRpdGVtcy5lcShfdGhpcy5jb3JlLmluZGV4KS5hdHRyKCdkYXRhLWh0bWwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWRWaWRlbyhfc3JjLCBfaHRtbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkdGVtcEltZyA9ICRlbC5maW5kKCcubGctb2JqZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICRlbC5maW5kKCcubGctdmlkZW8nKS5hcHBlbmQoJHRlbXBJbWcpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0b2RvIGxvYWRpbmcgaWNvbiBmb3IgaHRtbDUgdmlkZW9zIGFsc29cbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHNob3dpbmcgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIHdoaWxlIGxvYWRpbmcgdmlkZW9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZWwuZmluZCgnLmxnLXZpZGVvLW9iamVjdCcpLmhhc0NsYXNzKCdsZy1odG1sNScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWwucmVtb3ZlQ2xhc3MoJ2xnLWNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWwuZmluZCgnLmxnLXZpZGVvLW9iamVjdCcpLm9uKCdsb2FkLmxnIGVycm9yLmxnJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsLmFkZENsYXNzKCdsZy1jb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHlvdXR1YmVQbGF5ZXIgPSAkZWwuZmluZCgnLmxnLXlvdXR1YmUnKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2aW1lb1BsYXllciA9ICRlbC5maW5kKCcubGctdmltZW8nKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYWlseW1vdGlvblBsYXllciA9ICRlbC5maW5kKCcubGctZGFpbHltb3Rpb24nKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sNVBsYXllciA9ICRlbC5maW5kKCcubGctaHRtbDUnKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh5b3V0dWJlUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5b3V0dWJlUGxheWVyLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoJ3tcImV2ZW50XCI6XCJjb21tYW5kXCIsXCJmdW5jXCI6XCJwbGF5VmlkZW9cIixcImFyZ3NcIjpcIlwifScsICcqJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmltZW9QbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGYodmltZW9QbGF5ZXIpLmFwaSgncGxheScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCBmcm9vZ2Fsb29wMiBqcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhaWx5bW90aW9uUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYWlseW1vdGlvblBsYXllci5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCdwbGF5JywgJyonKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGh0bWw1UGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5zLnZpZGVvanMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb2pzKGh0bWw1UGxheWVyKS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYWtlIHN1cmUgeW91IGhhdmUgaW5jbHVkZWQgdmlkZW9qcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDVQbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJGVsLmFkZENsYXNzKCdsZy12aWRlby1wbGF5aW5nJyk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIFZpZGVvLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvTG9hZGVkID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gb25IYXNWaWRlbyhldmVudCwgaW5kZXgsIHNyYywgaHRtbCkge1xuICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jb3JlLiRzbGlkZS5lcShpbmRleCkuZmluZCgnLmxnLXZpZGVvJykuYXBwZW5kKF90aGlzLmxvYWRWaWRlbyhzcmMsICdsZy1vYmplY3QnLCB0cnVlLCBpbmRleCwgaHRtbCkpO1xuICAgICAgICAgICAgaWYgKGh0bWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5zLnZpZGVvanMpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvanMoX3RoaXMuY29yZS4kc2xpZGUuZXEoaW5kZXgpLmZpbmQoJy5sZy1odG1sNScpLmdldCgwKSwgX3RoaXMuY29yZS5zLnZpZGVvanNPcHRpb25zLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnZpZGVvTG9hZGVkICYmIF90aGlzLmNvcmUucy5hdXRvcGxheUZpcnN0VmlkZW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01ha2Ugc3VyZSB5b3UgaGF2ZSBpbmNsdWRlZCB2aWRlb2pzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZighX3RoaXMudmlkZW9Mb2FkZWQgJiYgX3RoaXMuY29yZS5zLmF1dG9wbGF5Rmlyc3RWaWRlbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29yZS4kc2xpZGUuZXEoaW5kZXgpLmZpbmQoJy5sZy1odG1sNScpLmdldCgwKS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkFmZXJBcHBlbmRTbGlkZShldmVudCwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgICAgICB2YXIgJHZpZGVvQ29udCA9IHRoaXMuY29yZS4kc2xpZGUuZXEoaW5kZXgpLmZpbmQoJy5sZy12aWRlby1jb250Jyk7XG4gICAgICAgICAgICBpZiAoISR2aWRlb0NvbnQuaGFzQ2xhc3MoJ2xnLWhhcy1pZnJhbWUnKSkge1xuICAgICAgICAgICAgICAgICR2aWRlb0NvbnQuY3NzKCdtYXgtd2lkdGgnLCB0aGlzLmNvcmUucy52aWRlb01heFdpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uQmVmb3JlU2xpZGUoZXZlbnQsIHByZXZJbmRleCwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgJHZpZGVvU2xpZGUgPSBfdGhpcy5jb3JlLiRzbGlkZS5lcShwcmV2SW5kZXgpO1xuICAgICAgICAgICAgdmFyIHlvdXR1YmVQbGF5ZXIgPSAkdmlkZW9TbGlkZS5maW5kKCcubGcteW91dHViZScpLmdldCgwKTtcbiAgICAgICAgICAgIHZhciB2aW1lb1BsYXllciA9ICR2aWRlb1NsaWRlLmZpbmQoJy5sZy12aW1lbycpLmdldCgwKTtcbiAgICAgICAgICAgIHZhciBkYWlseW1vdGlvblBsYXllciA9ICR2aWRlb1NsaWRlLmZpbmQoJy5sZy1kYWlseW1vdGlvbicpLmdldCgwKTtcbiAgICAgICAgICAgIHZhciB2a1BsYXllciA9ICR2aWRlb1NsaWRlLmZpbmQoJy5sZy12aycpLmdldCgwKTtcbiAgICAgICAgICAgIHZhciBodG1sNVBsYXllciA9ICR2aWRlb1NsaWRlLmZpbmQoJy5sZy1odG1sNScpLmdldCgwKTtcbiAgICAgICAgICAgIGlmICh5b3V0dWJlUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgeW91dHViZVBsYXllci5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCd7XCJldmVudFwiOlwiY29tbWFuZFwiLFwiZnVuY1wiOlwicGF1c2VWaWRlb1wiLFwiYXJnc1wiOlwiXCJ9JywgJyonKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmltZW9QbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAkZih2aW1lb1BsYXllcikuYXBpKCdwYXVzZScpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIGZyb29nYWxvb3AyIGpzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYWlseW1vdGlvblBsYXllcikge1xuICAgICAgICAgICAgICAgIGRhaWx5bW90aW9uUGxheWVyLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoJ3BhdXNlJywgJyonKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChodG1sNVBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb3JlLnMudmlkZW9qcykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9qcyhodG1sNVBsYXllcikucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIHZpZGVvanMnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWw1UGxheWVyLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBpZiAodmtQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAkKHZrUGxheWVyKS5hdHRyKCdzcmMnLCAkKHZrUGxheWVyKS5hdHRyKCdzcmMnKS5yZXBsYWNlKCcmYXV0b3BsYXknLCAnJm5vcGxheScpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIF9zcmM7XG4gICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5zLmR5bmFtaWMpIHtcbiAgICAgICAgICAgICAgICBfc3JjID0gX3RoaXMuY29yZS5zLmR5bmFtaWNFbFtpbmRleF0uc3JjO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfc3JjID0gX3RoaXMuY29yZS4kaXRlbXMuZXEoaW5kZXgpLmF0dHIoJ2hyZWYnKSB8fCBfdGhpcy5jb3JlLiRpdGVtcy5lcShpbmRleCkuYXR0cignZGF0YS1zcmMnKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgX2lzVmlkZW8gPSBfdGhpcy5jb3JlLmlzVmlkZW8oX3NyYywgaW5kZXgpIHx8IHt9O1xuICAgICAgICAgICAgaWYgKF9pc1ZpZGVvLnlvdXR1YmUgfHwgX2lzVmlkZW8udmltZW8gfHwgX2lzVmlkZW8uZGFpbHltb3Rpb24gfHwgX2lzVmlkZW8udmspIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLiRvdXRlci5hZGRDbGFzcygnbGctaGlkZS1kb3dubG9hZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgJC5mbi5saWdodEdhbGxlcnkubW9kdWxlcy52aWRlbyA9IFZpZGVvO1xuICAgIFxuICAgIH0pKCk7XG5cbn0pKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBLFdBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/lightgallery/modules/lg-video.js\n");

/***/ }),

/***/ "../components/gallery/gallery.js":
/*!****************************************!*\
  !*** ../components/gallery/gallery.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _jquery = __webpack_require__(/*! jquery */ \"../../node_modules/jquery/dist/jquery.js\");\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _page = __webpack_require__(/*! js/lib/page */ \"./lib/page.js\");\n\nvar _page2 = _interopRequireDefault(_page);\n\n__webpack_require__(/*! lightgallery */ \"../../node_modules/lightgallery/dist/js/lightgallery.js\");\n\n__webpack_require__(/*! lightgallery/modules/lg-fullscreen */ \"../../node_modules/lightgallery/modules/lg-fullscreen.js\");\n\n__webpack_require__(/*! lightgallery/modules/lg-video */ \"../../node_modules/lightgallery/modules/lg-video.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * gallery\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Gallery = function (_Page) {\n  _inherits(Gallery, _Page);\n\n  function Gallery(element) {\n    _classCallCheck(this, Gallery);\n\n    return _possibleConstructorReturn(this, _Page.call(this, element));\n  }\n\n  Gallery.prototype.init = function init() {\n    this.state = {};\n    this.param = {};\n    this.methods = {};\n\n    this.elements({\n      list: '.js-gallery-list',\n      item: '.js-gallery-item'\n    });\n\n    this.gallery();\n    this.events();\n  };\n\n  Gallery.prototype.handler = function handler() {};\n\n  Gallery.prototype.gallery = function gallery() {\n    this.$.list.lightGallery({\n      selector: '.js-gallery-item',\n      download: false,\n      counter: false,\n      startClass: 'lg-start-fade',\n      getCaptionFromTitleOrAlt: false\n    });\n  };\n\n  return Gallery;\n}(_page2.default);\n\nexports.default = Gallery;\n\n\n_page2.default.make(Gallery, '.js-gallery');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29tcG9uZW50cy9nYWxsZXJ5L2dhbGxlcnkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZnJvbnRlbmQvY29tcG9uZW50cy9nYWxsZXJ5L2dhbGxlcnkuanM/MTY4MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGdhbGxlcnlcbiAqL1xuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IFBhZ2UgZnJvbSAnanMvbGliL3BhZ2UnO1xuXG5pbXBvcnQgJ2xpZ2h0Z2FsbGVyeSc7XG5pbXBvcnQgJ2xpZ2h0Z2FsbGVyeS9tb2R1bGVzL2xnLWZ1bGxzY3JlZW4nO1xuaW1wb3J0ICdsaWdodGdhbGxlcnkvbW9kdWxlcy9sZy12aWRlbyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbGxlcnkgZXh0ZW5kcyBQYWdlIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuICB9XG4gIGluaXQoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMucGFyYW0gPSB7fTtcbiAgICB0aGlzLm1ldGhvZHMgPSB7fTtcblxuICAgIHRoaXMuZWxlbWVudHMoe1xuICAgICAgbGlzdDogJy5qcy1nYWxsZXJ5LWxpc3QnLFxuICAgICAgaXRlbTogJy5qcy1nYWxsZXJ5LWl0ZW0nXG4gICAgfSk7XG5cbiAgICB0aGlzLmdhbGxlcnkoKTtcbiAgICB0aGlzLmV2ZW50cygpO1xuICB9XG4gIGhhbmRsZXIoKSB7fVxuICBnYWxsZXJ5KCkge1xuICAgIHRoaXMuJC5saXN0LmxpZ2h0R2FsbGVyeSh7XG4gICAgICBzZWxlY3RvcjogJy5qcy1nYWxsZXJ5LWl0ZW0nLFxuICAgICAgZG93bmxvYWQ6IGZhbHNlLFxuICAgICAgY291bnRlcjogZmFsc2UsXG4gICAgICBzdGFydENsYXNzOiAnbGctc3RhcnQtZmFkZScsXG4gICAgICBnZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQ6IGZhbHNlXG4gICAgfSk7XG4gIH1cbn1cblxuUGFnZS5tYWtlKEdhbGxlcnksICcuanMtZ2FsbGVyeScpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7OztBQVZBOzs7O0FBV0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7O0FBM0JBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUEyQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../components/gallery/gallery.js\n");

/***/ }),

/***/ "../components/tabs/tabs.js":
/*!**********************************!*\
  !*** ../components/tabs/tabs.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * tabs\n */\n\nvar Tabs = function () {\n  function Tabs() {\n    _classCallCheck(this, Tabs);\n\n    this.$ = {\n      tabs: $('.js-tabs')\n    };\n\n    if (this.$.tabs.length) {\n      $.extend(this.$, {\n        tab: this.$.tabs.find('.js-tabs-item'),\n        label: this.$.tabs.find('.js-tabs-label'),\n        line: this.$.tabs.find('.js-tabs-line')\n      });\n\n      var index = this.getIndexFromHash();\n\n      this.state = {\n        index: index\n      };\n\n      this.init();\n    }\n  }\n\n  Tabs.prototype.init = function init() {\n    this.$.line.show();\n    this.$.tab.hide();\n    this.setLinePosition(this.state.index);\n    this.setActiveLabel(this.state.index);\n    this.setActiveTab(this.state.index);\n    this.initEvents();\n  };\n\n  Tabs.prototype.initEvents = function initEvents() {\n    var _this = this;\n\n    this.$.label.on('click', function (e) {\n      return _this.clickHandler(e);\n    });\n  };\n\n  Tabs.prototype.clickHandler = function clickHandler(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    var $target = $(e.currentTarget);\n    var href = $target.attr('href');\n    var index = $target.index();\n\n    this.setHash(href);\n    this.setActiveLabel(index);\n    this.setActiveTab(index);\n  };\n\n  Tabs.prototype.setActiveLabel = function setActiveLabel(index) {\n    this.$.label.removeClass('is-active');\n    this.$.label.eq(index).addClass('is-active');\n    this.setLinePosition(index);\n  };\n\n  Tabs.prototype.setActiveTab = function setActiveTab(index) {\n    var _this2 = this;\n\n    var $prev = this.$.tab.eq(this.state.index);\n    var $next = this.$.tab.eq(index);\n\n    $prev.removeClass('is-active');\n    $next.addClass('is-active');\n\n    $prev.fadeOut(300, function () {\n      $next.fadeIn(300);\n      _this2.state.index = index;\n    });\n  };\n\n  Tabs.prototype.setLinePosition = function setLinePosition(index) {\n    var label = this.$.label.eq(index);\n    var labelWidth = label.outerWidth();\n    var labelOffset = label.offset().left;\n\n    this.$.line.width(labelWidth).offset({ left: labelOffset });\n  };\n\n  Tabs.prototype.getIndexFromHash = function getIndexFromHash() {\n    var index = parseInt(window.location.hash.substr(5) - 1);\n    return isNaN(index) || index === -1 ? 0 : index;\n  };\n\n  Tabs.prototype.setHash = function setHash(value) {\n    window.location.hash = value;\n  };\n\n  return Tabs;\n}();\n\nexports.default = new Tabs();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"../../node_modules/jquery/dist/jquery.js\")))\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29tcG9uZW50cy90YWJzL3RhYnMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZnJvbnRlbmQvY29tcG9uZW50cy90YWJzL3RhYnMuanM/YmQyMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHRhYnNcbiAqL1xuXG5jbGFzcyBUYWJzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4kID0ge1xuICAgICAgdGFiczogJCgnLmpzLXRhYnMnKVxuICAgIH07XG5cbiAgICBpZiAodGhpcy4kLnRhYnMubGVuZ3RoKSB7XG4gICAgICAkLmV4dGVuZCh0aGlzLiQsIHtcbiAgICAgICAgdGFiOiB0aGlzLiQudGFicy5maW5kKCcuanMtdGFicy1pdGVtJyksXG4gICAgICAgIGxhYmVsOiB0aGlzLiQudGFicy5maW5kKCcuanMtdGFicy1sYWJlbCcpLFxuICAgICAgICBsaW5lOiB0aGlzLiQudGFicy5maW5kKCcuanMtdGFicy1saW5lJylcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXhGcm9tSGFzaCgpO1xuXG4gICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICBpbmRleFxuICAgICAgfTtcblxuICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICB9XG4gIGluaXQoKSB7XG4gICAgdGhpcy4kLmxpbmUuc2hvdygpO1xuICAgIHRoaXMuJC50YWIuaGlkZSgpO1xuICAgIHRoaXMuc2V0TGluZVBvc2l0aW9uKHRoaXMuc3RhdGUuaW5kZXgpO1xuICAgIHRoaXMuc2V0QWN0aXZlTGFiZWwodGhpcy5zdGF0ZS5pbmRleCk7XG4gICAgdGhpcy5zZXRBY3RpdmVUYWIodGhpcy5zdGF0ZS5pbmRleCk7XG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cbiAgaW5pdEV2ZW50cygpIHtcbiAgICB0aGlzLiQubGFiZWwub24oJ2NsaWNrJywgZSA9PiB0aGlzLmNsaWNrSGFuZGxlcihlKSk7XG4gIH1cbiAgY2xpY2tIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGNvbnN0ICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgY29uc3QgaHJlZiA9ICR0YXJnZXQuYXR0cignaHJlZicpO1xuICAgIGNvbnN0IGluZGV4ID0gJHRhcmdldC5pbmRleCgpO1xuXG4gICAgdGhpcy5zZXRIYXNoKGhyZWYpO1xuICAgIHRoaXMuc2V0QWN0aXZlTGFiZWwoaW5kZXgpO1xuICAgIHRoaXMuc2V0QWN0aXZlVGFiKGluZGV4KTtcbiAgfVxuICBzZXRBY3RpdmVMYWJlbChpbmRleCkge1xuICAgIHRoaXMuJC5sYWJlbC5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgdGhpcy4kLmxhYmVsLmVxKGluZGV4KS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgdGhpcy5zZXRMaW5lUG9zaXRpb24oaW5kZXgpO1xuICB9XG4gIHNldEFjdGl2ZVRhYihpbmRleCkge1xuICAgIGNvbnN0ICRwcmV2ID0gdGhpcy4kLnRhYi5lcSh0aGlzLnN0YXRlLmluZGV4KTtcbiAgICBjb25zdCAkbmV4dCA9IHRoaXMuJC50YWIuZXEoaW5kZXgpO1xuXG4gICAgJHByZXYucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICRuZXh0LmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcblxuICAgICRwcmV2LmZhZGVPdXQoMzAwLCAoKSA9PiB7XG4gICAgICAkbmV4dC5mYWRlSW4oMzAwKTtcbiAgICAgIHRoaXMuc3RhdGUuaW5kZXggPSBpbmRleDtcbiAgICB9KTtcbiAgfVxuICBzZXRMaW5lUG9zaXRpb24oaW5kZXgpIHtcbiAgICBjb25zdCBsYWJlbCA9IHRoaXMuJC5sYWJlbC5lcShpbmRleCk7XG4gICAgY29uc3QgbGFiZWxXaWR0aCA9IGxhYmVsLm91dGVyV2lkdGgoKTtcbiAgICBjb25zdCBsYWJlbE9mZnNldCA9IGxhYmVsLm9mZnNldCgpLmxlZnQ7XG5cbiAgICB0aGlzLiQubGluZS53aWR0aChsYWJlbFdpZHRoKS5vZmZzZXQoeyBsZWZ0OiBsYWJlbE9mZnNldCB9KTtcbiAgfVxuICBnZXRJbmRleEZyb21IYXNoKCkge1xuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDUpIC0gMSk7XG4gICAgcmV0dXJuIGlzTmFOKGluZGV4KSB8fCBpbmRleCA9PT0gLTEgPyAwIDogaW5kZXg7XG4gIH1cbiAgc2V0SGFzaCh2YWx1ZSkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRhYnMoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../components/tabs/tabs.js\n");

/***/ }),

/***/ "./gallery.js":
/*!********************!*\
  !*** ./gallery.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! ~/tabs/tabs */ \"../components/tabs/tabs.js\");\n\n__webpack_require__(/*! ~/gallery/gallery */ \"../components/gallery/gallery.js\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nYWxsZXJ5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2Zyb250ZW5kL2pzL2dhbGxlcnkuanM/ZmFiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ34vdGFicy90YWJzJztcbmltcG9ydCAnfi9nYWxsZXJ5L2dhbGxlcnknO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./gallery.js\n");

/***/ })

/******/ });